# Task ID: 8
# Title: Implement Course Management in Admin
# Status: done
# Dependencies: 3, 7
# Priority: high
# Description: Create the admin interface for managing courses, including listing, creation, editing, and deletion.
# Details:
Develop a courses listing page with Shadcn UI Table component. Create forms for adding and editing courses using Shadcn UI form components. Implement Convex queries for fetching courses and mutations for creating, updating, and deleting courses. Add search and filtering functionality for the courses list.

# Test Strategy:
Test the complete CRUD flow for courses. Verify that real-time updates work when courses are modified. Test validation on course forms. Ensure search and filtering work correctly.

# Subtasks:
## 1. Create Convex Schema and Queries for Courses [done]
### Dependencies: None
### Description: Define the Convex schema for courses and implement the necessary queries and mutations for CRUD operations.
### Details:
Implementation steps:
1. Define the course schema in Convex schema file with fields like id, title, description, instructor, duration, price, category, etc.
2. Implement a query to fetch all courses with optional pagination
3. Implement a query to fetch a single course by ID
4. Create a mutation for adding a new course
5. Create a mutation for updating an existing course
6. Create a mutation for deleting a course
7. Add proper validation and error handling

Testing approach:
- Test each query and mutation using the Convex dashboard
- Verify data integrity and validation works correctly
- Test edge cases like empty fields or invalid inputs

## 2. Implement Courses Listing Page with Shadcn UI Table [done]
### Dependencies: 8.1
### Description: Create the admin interface for displaying all courses in a table format with sorting capabilities.
### Details:
Implementation steps:
1. Create a new page at `/admin/courses` using Next.js routing
2. Import and set up the Shadcn UI Table component
3. Connect to the Convex query to fetch all courses
4. Define table columns (title, instructor, category, price, etc.)
5. Implement sorting functionality for relevant columns
6. Add loading states and error handling
7. Style the table according to the application's design system

Testing approach:
- Verify courses are displayed correctly in the table
- Test sorting functionality for each column
- Ensure loading states work properly
- Test with empty data and error states

## 3. Implement Course Creation Form [done]
### Dependencies: 8.1
### Description: Create a form for adding new courses using Shadcn UI form components with validation.
### Details:
Implementation steps:
1. Create a new page at `/admin/courses/new` or a modal component
2. Set up Shadcn UI form components with React Hook Form
3. Add form fields for all course properties (title, description, instructor, etc.)
4. Implement form validation using zod or similar
5. Connect form submission to the Convex mutation for creating courses
6. Add loading state during submission
7. Implement success/error notifications
8. Add a cancel button that returns to the courses listing

Testing approach:
- Test form validation for required fields and format constraints
- Verify successful submission creates a new course
- Test error handling for failed submissions
- Ensure the form resets properly after submission

## 4. Implement Course Editing Functionality [done]
### Dependencies: 8.1, 8.2
### Description: Create a form for editing existing courses, pre-populated with course data.
### Details:
Implementation steps:
1. Create a new page at `/admin/courses/[id]/edit` or a modal component
2. Reuse the form components from the creation form
3. Fetch the existing course data using the Convex query
4. Pre-populate the form with the existing course data
5. Connect form submission to the Convex mutation for updating courses
6. Add loading state during submission
7. Implement success/error notifications
8. Add a cancel button that returns to the courses listing

Testing approach:
- Verify form is correctly pre-populated with existing course data
- Test that updates are correctly saved to the database
- Test validation works correctly for edited fields
- Ensure cancellation works without saving changes

## 5. Implement Search, Filtering, and Delete Functionality [done]
### Dependencies: 8.1, 8.2
### Description: Add search and filtering capabilities to the courses list and implement course deletion.
### Details:
Implementation steps:
1. Add a search input above the courses table
2. Modify the Convex query to support searching by course title or description
3. Implement filter dropdowns for categories or other relevant fields
4. Update the query to support filtering
5. Add a delete button to each course row in the table
6. Implement a confirmation dialog before deletion
7. Connect the delete button to the Convex deletion mutation
8. Add success/error notifications for deletion

Testing approach:
- Test search functionality with various search terms
- Verify filters correctly narrow down the displayed courses
- Test that deletion works correctly after confirmation
- Ensure the UI updates immediately after deletion
- Test combinations of search and filters

