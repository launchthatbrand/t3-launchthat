# Task ID: 6
# Title: Update Monday Rule UI
# Status: done
# Dependencies: 4, 5
# Priority: medium
# Description: Adapt the existing Monday rule management UI to use the new generic components while maintaining the same user experience and functionality.
# Details:
1. Create a Monday-specific rule management page that uses the generic components:

```tsx
const MondayRulesPage: React.FC = () => {
  const [editingRule, setEditingRule] = useState<Rule | undefined>();
  const [isCreating, setIsCreating] = useState(false);
  
  const { mutate: saveRule } = useMutation(api.rules.saveRule);
  const { mutate: deleteRule } = useMutation(api.rules.deleteRule);
  const { mutate: toggleRule } = useMutation(api.rules.toggleRule);
  
  const handleSaveRule = async (rule: Rule) => {
    await saveRule({ rule });
    setEditingRule(undefined);
    setIsCreating(false);
  };
  
  const handleDeleteRule = async (ruleId: string) => {
    if (confirm('Are you sure you want to delete this rule?')) {
      await deleteRule({ ruleId });
    }
  };
  
  const handleToggleRule = async (ruleId: string, enabled: boolean) => {
    await toggleRule({ ruleId, enabled });
  };
  
  return (
    <div className="monday-rules-page">
      <header>
        <h1>Monday.com Automation Rules</h1>
        <button onClick={() => setIsCreating(true)}>Create New Rule</button>
      </header>
      
      {(isCreating || editingRule) ? (
        <RuleEditor
          rule={editingRule}
          integrationId="monday"
          onSave={handleSaveRule}
          onCancel={() => {
            setEditingRule(undefined);
            setIsCreating(false);
          }}
        />
      ) : (
        <RuleList
          integrationId="monday"
          onEditRule={setEditingRule}
          onDeleteRule={handleDeleteRule}
          onToggleRule={handleToggleRule}
        />
      )}
      
      {/* Monday-specific help content */}
      <div className="monday-help-section">
        <h2>Monday.com Automation Help</h2>
        <p>Rules allow you to automate actions in your Monday.com boards based on triggers and conditions.</p>
        <h3>Available Triggers</h3>
        <ul>
          <li><strong>Item Created</strong> - Triggered when a new item is added to a board</li>
          <li><strong>Status Changed</strong> - Triggered when an item's status column changes</li>
          {/* Other Monday-specific triggers */}
        </ul>
        {/* More help content */}
      </div>
    </div>
  );
};
```

2. Create Monday-specific rule templates:

```tsx
const MondayRuleTemplates: React.FC<{ onSelectTemplate: (template: Rule) => void }> = ({ 
  onSelectTemplate 
}) => {
  const templates = [
    {
      name: 'Status Update Notification',
      description: 'Send a notification when an item status changes to a specific value',
      template: {
        name: 'Status Update Notification',
        description: 'Send a notification when an item status changes',
        integrationId: 'monday',
        triggerType: 'status_changed',
        triggerConfig: {
          boardId: '', // To be filled by user
        },
        conditions: [
          {
            type: 'status_equals',
            config: {
              value: 'Done',
            },
          },
        ],
        actions: [
          {
            type: 'send_notification',
            config: {
              message: 'Item {{item.name}} is now Done',
              userIds: [],
            },
          },
        ],
      },
    },
    // Other templates
  ];
  
  return (
    <div className="rule-templates">
      <h2>Rule Templates</h2>
      <div className="template-list">
        {templates.map((template, index) => (
          <div key={index} className="template-item" onClick={() => onSelectTemplate(template.template)}>
            <h3>{template.name}</h3>
            <p>{template.description}</p>
          </div>
        ))}
      </div>
    </div>
  );
};
```

3. Create Monday-specific form helpers for rule configuration:

```tsx
const MondayBoardSelector: React.FC<{
  value: string;
  onChange: (boardId: string) => void;
}> = ({ value, onChange }) => {
  const { data: boards, isLoading } = useQuery(api.monday.getBoards);
  
  if (isLoading) {
    return <div>Loading boards...</div>;
  }
  
  return (
    <select value={value} onChange={(e) => onChange(e.target.value)}>
      <option value="">Select a board</option>
      {boards?.map(board => (
        <option key={board.id} value={board.id}>{board.name}</option>
      ))}
    </select>
  );
};

const MondayColumnSelector: React.FC<{
  boardId: string;
  value: string;
  onChange: (columnId: string) => void;
}> = ({ boardId, value, onChange }) => {
  const { data: columns, isLoading } = useQuery(api.monday.getBoardColumns, { boardId });
  
  if (!boardId) {
    return <div>Please select a board first</div>;
  }
  
  if (isLoading) {
    return <div>Loading columns...</div>;
  }
  
  return (
    <select value={value} onChange={(e) => onChange(e.target.value)}>
      <option value="">Select a column</option>
      {columns?.map(column => (
        <option key={column.id} value={column.id}>{column.title}</option>
      ))}
    </select>
  );
};
```

4. Create a Monday-specific rule summary component:

```tsx
const MondayRuleSummary: React.FC<{ rule: Rule }> = ({ rule }) => {
  // Get human-readable descriptions of Monday-specific rule components
  const triggerDescription = getMondayTriggerDescription(rule.triggerType, rule.triggerConfig);
  const conditionsDescription = getMondayConditionsDescription(rule.conditions);
  const actionsDescription = getMondayActionsDescription(rule.actions);
  
  return (
    <div className="rule-summary">
      <div className="trigger-summary">
        <strong>When:</strong> {triggerDescription}
      </div>
      {rule.conditions.length > 0 && (
        <div className="conditions-summary">
          <strong>If:</strong> {conditionsDescription}
        </div>
      )}
      <div className="actions-summary">
        <strong>Then:</strong> {actionsDescription}
      </div>
    </div>
  );
};

// Helper functions to generate human-readable descriptions
function getMondayTriggerDescription(type: string, config: any): string {
  switch (type) {
    case 'item_created':
      return `A new item is created in board "${getBoardName(config.boardId)}"`;
    case 'status_changed':
      return `An item's status changes in board "${getBoardName(config.boardId)}"`;
    // Other trigger types
    default:
      return 'Unknown trigger';
  }
}

// Similar functions for conditions and actions
```

5. Create a navigation component that integrates with the existing Monday UI:

```tsx
const MondayNavigation: React.FC<{ currentPage: string }> = ({ currentPage }) => {
  return (
    <nav className="monday-navigation">
      <ul>
        <li className={currentPage === 'dashboard' ? 'active' : ''}>
          <Link href="/monday/dashboard">Dashboard</Link>
        </li>
        <li className={currentPage === 'boards' ? 'active' : ''}>
          <Link href="/monday/boards">Boards</Link>
        </li>
        <li className={currentPage === 'rules' ? 'active' : ''}>
          <Link href="/monday/rules">Automation Rules</Link>
        </li>
        <li className={currentPage === 'settings' ? 'active' : ''}>
          <Link href="/monday/settings">Settings</Link>
        </li>
      </ul>
    </nav>
  );
};
```

# Test Strategy:
1. Create unit tests for Monday-specific UI components
2. Test integration with the generic rule management components
3. Verify that all existing Monday rule functionality is preserved
4. Test the rule templates and form helpers
5. Create user flow tests for common Monday rule management scenarios
6. Test error handling and edge cases
7. Verify that the UI matches the existing Monday integration design
8. Conduct usability testing with existing Monday integration users
