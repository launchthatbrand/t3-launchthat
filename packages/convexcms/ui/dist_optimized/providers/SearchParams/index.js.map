{"version":3,"file":"index.js","names":["React","createContext","use","useSearchParams","useNextSearchParams","qs","initialContext","searchParams","stringifyParams","Context","SearchParamsProvider","children","nextSearchParams","searchString","toString","useMemo","parse","depth","ignoreQueryPrefix","useCallback","params","replace","stringify","addQueryPrefix","_jsx","value"],"sources":["../../../src/providers/SearchParams/index.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, use } from \"react\";\nimport { useSearchParams as useNextSearchParams } from \"next/navigation.js\";\nimport * as qs from \"qs-esm\";\n\nexport type SearchParamsContext = {\n  searchParams: qs.ParsedQs;\n  stringifyParams: ({\n    params,\n    replace,\n  }: {\n    params: qs.ParsedQs;\n    replace?: boolean;\n  }) => string;\n};\n\nconst initialContext: SearchParamsContext = {\n  searchParams: {},\n  stringifyParams: () => \"\",\n};\n\nconst Context = createContext(initialContext);\n\n/**\n * @deprecated\n * The SearchParamsProvider is deprecated and will be removed in the next major release. Instead, use the `useSearchParams` hook from `next/navigation` directly. See https://github.com/payloadcms/payload/pull/9581.\n * @example\n * ```tsx\n * import { useSearchParams } from 'next/navigation'\n * ```\n */\nexport const SearchParamsProvider: React.FC<{ children?: React.ReactNode }> = ({\n  children,\n}) => {\n  const nextSearchParams = useNextSearchParams();\n  const searchString = nextSearchParams.toString();\n\n  const searchParams = React.useMemo(\n    () =>\n      qs.parse(searchString, {\n        depth: 10,\n        ignoreQueryPrefix: true,\n      }),\n    [searchString],\n  );\n\n  const stringifyParams = React.useCallback(\n    ({\n      params,\n      replace = false,\n    }: {\n      params: qs.ParsedQs;\n      replace?: boolean;\n    }) => {\n      return qs.stringify(\n        {\n          ...(replace ? {} : searchParams),\n          ...params,\n        },\n        { addQueryPrefix: true },\n      );\n    },\n    [searchParams],\n  );\n\n  return (\n    <Context value={{ searchParams, stringifyParams }}>{children}</Context>\n  );\n};\n\n/**\n * @deprecated\n * The `useSearchParams` hook is deprecated and will be removed in the next major release. Instead, use the `useSearchParams` hook from `next/navigation` directly. See https://github.com/payloadcms/payload/pull/9581.\n * @example\n * ```tsx\n * import { useSearchParams } from 'next/navigation'\n * ```\n * If you need to parse the `where` query, you can do so with the `parseSearchParams` utility.\n * ```tsx\n * import { parseSearchParams } from '@convexcms/ui'\n * const parsedSearchParams = parseSearchParams(searchParams)\n * ```\n */\nexport const useSearchParams = (): SearchParamsContext => use(Context);\n"],"mappings":"AAAA;;;AAEA,OAAOA,KAAA,IAASC,aAAa,EAAEC,GAAG,QAAQ;AAC1C,SAASC,eAAA,IAAmBC,mBAAmB,QAAQ;AACvD,YAAYC,EAAA,MAAQ;AAapB,MAAMC,cAAA,GAAsC;EAC1CC,YAAA,EAAc,CAAC;EACfC,eAAA,EAAiBA,CAAA,KAAM;AACzB;AAEA,MAAMC,OAAA,gBAAUR,aAAA,CAAcK,cAAA;AAE9B;;;;;;;;AAQA,OAAO,MAAMI,oBAAA,GAAiEA,CAAC;EAC7EC;AAAQ,CACT;EACC,MAAMC,gBAAA,GAAmBR,mBAAA;EACzB,MAAMS,YAAA,GAAeD,gBAAA,CAAiBE,QAAQ;EAE9C,MAAMP,YAAA,GAAeP,KAAA,CAAMe,OAAO,CAChC,MACEV,EAAA,CAAGW,KAAK,CAACH,YAAA,EAAc;IACrBI,KAAA,EAAO;IACPC,iBAAA,EAAmB;EACrB,IACF,CAACL,YAAA,CAAa;EAGhB,MAAML,eAAA,GAAkBR,KAAA,CAAMmB,WAAW,CACvC,CAAC;IACCC,MAAM;IACNC,OAAA,GAAU;EAAK,CAIhB;IACC,OAAOhB,EAAA,CAAGiB,SAAS,CACjB;MACE,IAAID,OAAA,GAAU,CAAC,IAAId,YAAY;MAC/B,GAAGa;IACL,GACA;MAAEG,cAAA,EAAgB;IAAK;EAE3B,GACA,CAAChB,YAAA,CAAa;EAGhB,oBACEiB,IAAA,CAACf,OAAA;IAAQgB,KAAA,EAAO;MAAElB,YAAA;MAAcC;IAAgB;cAAIG;;AAExD;AAEA;;;;;;;;;;;;;AAaA,OAAO,MAAMR,eAAA,GAAkBA,CAAA,KAA2BD,GAAA,CAAIO,OAAA","ignoreList":[]}