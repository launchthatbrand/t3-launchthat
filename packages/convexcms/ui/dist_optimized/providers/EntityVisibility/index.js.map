{"version":3,"file":"index.js","names":["React","createContext","use","useCallback","EntityVisibilityContext","EntityVisibilityProvider","children","visibleEntities","isEntityVisible","collectionSlug","globalSlug","collections","includes","globals","_jsx","value","useEntityVisibility"],"sources":["../../../src/providers/EntityVisibility/index.tsx"],"sourcesContent":["\"use client\";\n\nimport type {\n  SanitizedCollectionConfig,\n  SanitizedGlobalConfig,\n  VisibleEntities,\n} from \"@convexcms/core\";\nimport React, { createContext, use, useCallback } from \"react\";\n\nexport type VisibleEntitiesContextType = {\n  isEntityVisible: ({\n    collectionSlug,\n    globalSlug,\n  }: {\n    collectionSlug?: SanitizedCollectionConfig[\"slug\"];\n    globalSlug?: SanitizedGlobalConfig[\"slug\"];\n  }) => boolean;\n  visibleEntities: VisibleEntities;\n};\n\nexport const EntityVisibilityContext = createContext(\n  {} as VisibleEntitiesContextType,\n);\n\nexport const EntityVisibilityProvider: React.FC<{\n  children: React.ReactNode;\n  visibleEntities?: VisibleEntities;\n}> = ({ children, visibleEntities }) => {\n  const isEntityVisible = useCallback(\n    ({\n      collectionSlug,\n      globalSlug,\n    }: {\n      collectionSlug: SanitizedCollectionConfig[\"slug\"];\n      globalSlug: SanitizedGlobalConfig[\"slug\"];\n    }) => {\n      if (collectionSlug) {\n        return visibleEntities.collections.includes(collectionSlug);\n      }\n\n      if (globalSlug) {\n        return visibleEntities.globals.includes(globalSlug);\n      }\n\n      return false;\n    },\n    [visibleEntities],\n  );\n\n  return (\n    <EntityVisibilityContext value={{ isEntityVisible, visibleEntities }}>\n      {children}\n    </EntityVisibilityContext>\n  );\n};\n\nexport const useEntityVisibility = (): VisibleEntitiesContextType =>\n  use(EntityVisibilityContext);\n"],"mappings":"AAAA;;;AAOA,OAAOA,KAAA,IAASC,aAAa,EAAEC,GAAG,EAAEC,WAAW,QAAQ;AAavD,OAAO,MAAMC,uBAAA,gBAA0BH,aAAA,CACrC,CAAC;AAGH,OAAO,MAAMI,wBAAA,GAGRA,CAAC;EAAEC,QAAQ;EAAEC;AAAe,CAAE;EACjC,MAAMC,eAAA,GAAkBL,WAAA,CACtB,CAAC;IACCM,cAAc;IACdC;EAAU,CAIX;IACC,IAAID,cAAA,EAAgB;MAClB,OAAOF,eAAA,CAAgBI,WAAW,CAACC,QAAQ,CAACH,cAAA;IAC9C;IAEA,IAAIC,UAAA,EAAY;MACd,OAAOH,eAAA,CAAgBM,OAAO,CAACD,QAAQ,CAACF,UAAA;IAC1C;IAEA,OAAO;EACT,GACA,CAACH,eAAA,CAAgB;EAGnB,oBACEO,IAAA,CAACV,uBAAA;IAAwBW,KAAA,EAAO;MAAEP,eAAA;MAAiBD;IAAgB;cAChED;;AAGP;AAEA,OAAO,MAAMU,mBAAA,GAAsBA,CAAA,KACjCd,GAAA,CAAIE,uBAAA","ignoreList":[]}