{"version":3,"file":"index.js","names":["React","DraggableSortableItem","DragHandleIcon","EditIcon","Button","useDocumentDrawer","Thumbnail","baseClass","DraggableFileDetails","props","collectionSlug","doc","hideRemoveFile","imageCacheTag","isSortable","removeItem","rowIndex","uploadConfig","id","filename","thumbnailURL","url","DocumentDrawer","DocumentDrawerToggler","_jsx","draggableSortableItemProps","_jsxs","className","filter","Boolean","join","ref","setNodeRef","style","transform","transition","zIndex","isDragging","undefined","attributes","listeners","fileSrc","buttonStyle","icon","iconStyle","onClick","round"],"sources":["../../../../src/elements/FileDetails/DraggableFileDetails/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type {\n  Data,\n  FileSizes,\n  SanitizedCollectionConfig,\n} from \"@convexcms/core\";\nimport React from \"react\";\n\nimport { DraggableSortableItem } from \"../../../elements/DraggableSortable/DraggableSortableItem/index.js\";\nimport { DragHandleIcon } from \"../../../icons/DragHandle/index.js\";\nimport { EditIcon } from \"../../../icons/Edit/index.js\";\nimport { Button } from \"../../Button/index.js\";\nimport { useDocumentDrawer } from \"../../DocumentDrawer/index.js\";\nimport { Thumbnail } from \"../../Thumbnail/index.js\";\n\nconst baseClass = \"file-details-draggable\";\n\nexport type DraggableFileDetailsProps = {\n  collectionSlug: string;\n  customUploadActions?: React.ReactNode[];\n  doc: {\n    sizes?: FileSizes;\n  } & Data;\n  enableAdjustments?: boolean;\n  hasImageSizes?: boolean;\n  hasMany: boolean;\n  hideRemoveFile?: boolean;\n  imageCacheTag?: string;\n  isSortable?: boolean;\n  removeItem?: (index: number) => void;\n  rowIndex: number;\n  uploadConfig: SanitizedCollectionConfig[\"upload\"];\n};\n\nexport const DraggableFileDetails: React.FC<DraggableFileDetailsProps> = (\n  props,\n) => {\n  const {\n    collectionSlug,\n    doc,\n    hideRemoveFile,\n    imageCacheTag,\n    isSortable,\n    removeItem,\n    rowIndex,\n    uploadConfig,\n  } = props;\n\n  const { id, filename, thumbnailURL, url } = doc;\n\n  const [DocumentDrawer, DocumentDrawerToggler] = useDocumentDrawer({\n    id,\n    collectionSlug,\n  });\n\n  return (\n    <DraggableSortableItem id={id} key={id}>\n      {(draggableSortableItemProps) => (\n        <div\n          className={[\n            baseClass,\n            draggableSortableItemProps &&\n              isSortable &&\n              `${baseClass}--has-drag-handle`,\n          ]\n            .filter(Boolean)\n            .join(\" \")}\n          ref={draggableSortableItemProps.setNodeRef}\n          style={{\n            transform: draggableSortableItemProps.transform,\n            transition: draggableSortableItemProps.transition,\n            zIndex: draggableSortableItemProps.isDragging ? 1 : undefined,\n          }}\n        >\n          <div className={`${baseClass}--drag-wrapper`}>\n            {isSortable && draggableSortableItemProps && (\n              <div\n                className={`${baseClass}__drag`}\n                {...draggableSortableItemProps.attributes}\n                {...draggableSortableItemProps.listeners}\n              >\n                <DragHandleIcon />\n              </div>\n            )}\n            <Thumbnail\n              className={`${baseClass}__thumbnail`}\n              collectionSlug={collectionSlug}\n              doc={doc}\n              fileSrc={thumbnailURL || url}\n              imageCacheTag={imageCacheTag}\n              uploadConfig={uploadConfig}\n            />\n          </div>\n          <div className={`${baseClass}__main-detail`}>{filename}</div>\n\n          <div className={`${baseClass}__actions`}>\n            <DocumentDrawer />\n            <DocumentDrawerToggler>\n              <EditIcon />\n            </DocumentDrawerToggler>\n            {!hideRemoveFile && removeItem && (\n              <Button\n                buttonStyle=\"icon-label\"\n                className={`${baseClass}__remove`}\n                icon=\"x\"\n                iconStyle=\"none\"\n                onClick={() => removeItem(rowIndex)}\n                round\n              />\n            )}\n          </div>\n        </div>\n      )}\n    </DraggableSortableItem>\n  );\n};\n"],"mappings":"AAAA;;;AAEA,OAAO;AAOP,OAAOA,KAAA,MAAW;AAElB,SAASC,qBAAqB,QAAQ;AACtC,SAASC,cAAc,QAAQ;AAC/B,SAASC,QAAQ,QAAQ;AACzB,SAASC,MAAM,QAAQ;AACvB,SAASC,iBAAiB,QAAQ;AAClC,SAASC,SAAS,QAAQ;AAE1B,MAAMC,SAAA,GAAY;AAmBlB,OAAO,MAAMC,oBAAA,GACXC,KAAA;EAEA,MAAM;IACJC,cAAc;IACdC,GAAG;IACHC,cAAc;IACdC,aAAa;IACbC,UAAU;IACVC,UAAU;IACVC,QAAQ;IACRC;EAAY,CACb,GAAGR,KAAA;EAEJ,MAAM;IAAES,EAAE;IAAEC,QAAQ;IAAEC,YAAY;IAAEC;EAAG,CAAE,GAAGV,GAAA;EAE5C,MAAM,CAACW,cAAA,EAAgBC,qBAAA,CAAsB,GAAGlB,iBAAA,CAAkB;IAChEa,EAAA;IACAR;EACF;EAEA,oBACEc,IAAA,CAACvB,qBAAA;IAAsBiB,EAAA,EAAIA,EAAA;cACvBO,0BAAA,iBACAC,KAAA,CAAC;MACCC,SAAA,EAAW,CACTpB,SAAA,EACAkB,0BAAA,IACEX,UAAA,IACA,GAAGP,SAAA,mBAA4B,CAClC,CACEqB,MAAM,CAACC,OAAA,EACPC,IAAI,CAAC;MACRC,GAAA,EAAKN,0BAAA,CAA2BO,UAAU;MAC1CC,KAAA,EAAO;QACLC,SAAA,EAAWT,0BAAA,CAA2BS,SAAS;QAC/CC,UAAA,EAAYV,0BAAA,CAA2BU,UAAU;QACjDC,MAAA,EAAQX,0BAAA,CAA2BY,UAAU,GAAG,IAAIC;MACtD;8BAEAZ,KAAA,CAAC;QAAIC,SAAA,EAAW,GAAGpB,SAAA,gBAAyB;mBACzCO,UAAA,IAAcW,0BAAA,iBACbD,IAAA,CAAC;UACCG,SAAA,EAAW,GAAGpB,SAAA,QAAiB;UAC9B,GAAGkB,0BAAA,CAA2Bc,UAAU;UACxC,GAAGd,0BAAA,CAA2Be,SAAS;oBAExC,aAAAhB,IAAA,CAACtB,cAAA;yBAGLsB,IAAA,CAAClB,SAAA;UACCqB,SAAA,EAAW,GAAGpB,SAAA,aAAsB;UACpCG,cAAA,EAAgBA,cAAA;UAChBC,GAAA,EAAKA,GAAA;UACL8B,OAAA,EAASrB,YAAA,IAAgBC,GAAA;UACzBR,aAAA,EAAeA,aAAA;UACfI,YAAA,EAAcA;;uBAGlBO,IAAA,CAAC;QAAIG,SAAA,EAAW,GAAGpB,SAAA,eAAwB;kBAAGY;uBAE9CO,KAAA,CAAC;QAAIC,SAAA,EAAW,GAAGpB,SAAA,WAAoB;gCACrCiB,IAAA,CAACF,cAAA,O,aACDE,IAAA,CAACD,qBAAA;oBACC,aAAAC,IAAA,CAACrB,QAAA;YAEF,CAACS,cAAA,IAAkBG,UAAA,iBAClBS,IAAA,CAACpB,MAAA;UACCsC,WAAA,EAAY;UACZf,SAAA,EAAW,GAAGpB,SAAA,UAAmB;UACjCoC,IAAA,EAAK;UACLC,SAAA,EAAU;UACVC,OAAA,EAASA,CAAA,KAAM9B,UAAA,CAAWC,QAAA;UAC1B8B,KAAK;;;;KAnDmB5B,EAAA;AA2DxC","ignoreList":[]}