{"version":3,"file":"index.js","names":["React","getTranslation","useLoadingOverlay","useFormProcessing","useTranslation","baseClass","LoadingOverlay","animationDuration","loadingText","overlayType","show","t","_jsxs","className","filter","Boolean","join","style","_jsx","LoadingOverlayToggle","name","key","type","toggleLoadingOverlay","useEffect","isLoading","undefined","FormLoadingOverlayToggle","action","formIsLoading","loadingSuffix","isProcessing","i18n","labels","create","loading","update","trim"],"sources":["../../../src/elements/Loading/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport React from \"react\";\nimport { getTranslation } from \"@convexcms/translations\";\n\nimport type { LoadingOverlayTypes } from \"../../elements/LoadingOverlay/types.js\";\nimport { useLoadingOverlay } from \"../../elements/LoadingOverlay/index.js\";\nimport { useFormProcessing } from \"../../forms/Form/context.js\";\nimport { useTranslation } from \"../../providers/Translation/index.js\";\n\nconst baseClass = \"loading-overlay\";\n\ntype LoadingOverlayProps = {\n  animationDuration?: string;\n  loadingText?: string;\n  overlayType?: string;\n  show?: boolean;\n};\n\nexport const LoadingOverlay: React.FC<LoadingOverlayProps> = ({\n  animationDuration,\n  loadingText,\n  overlayType,\n  show = true,\n}) => {\n  const { t } = useTranslation();\n\n  return (\n    <div\n      className={[\n        baseClass,\n        show ? `${baseClass}--entering` : `${baseClass}--exiting`,\n        overlayType ? `${baseClass}--${overlayType}` : \"\",\n      ]\n        .filter(Boolean)\n        .join(\" \")}\n      style={{\n        animationDuration: animationDuration || \"500ms\",\n      }}\n    >\n      <div className={`${baseClass}__bars`}>\n        <div className={`${baseClass}__bar`} />\n        <div className={`${baseClass}__bar`} />\n        <div className={`${baseClass}__bar`} />\n        <div className={`${baseClass}__bar`} />\n        <div className={`${baseClass}__bar`} />\n      </div>\n\n      <span className={`${baseClass}__text`}>\n        {loadingText || t(\"general:loading\")}\n      </span>\n    </div>\n  );\n};\n\nexport type UseLoadingOverlayToggleProps = {\n  loadingText?: string;\n  name: string;\n  show: boolean;\n  type?: LoadingOverlayTypes;\n};\nexport const LoadingOverlayToggle: React.FC<UseLoadingOverlayToggleProps> = ({\n  name: key,\n  type = \"fullscreen\",\n  loadingText,\n  show,\n}) => {\n  const { toggleLoadingOverlay } = useLoadingOverlay();\n\n  React.useEffect(() => {\n    toggleLoadingOverlay({\n      type,\n      isLoading: show,\n      key,\n      loadingText: loadingText || undefined,\n    });\n\n    return () => {\n      toggleLoadingOverlay({\n        type,\n        isLoading: false,\n        key,\n      });\n    };\n  }, [show, toggleLoadingOverlay, key, type, loadingText]);\n\n  return null;\n};\n\nexport type FormLoadingOverlayToggleProps = {\n  action: \"create\" | \"loading\" | \"update\";\n  formIsLoading?: boolean;\n  loadingSuffix?: string;\n  name: string;\n  type?: LoadingOverlayTypes;\n};\n\nexport const FormLoadingOverlayToggle: React.FC<\n  FormLoadingOverlayToggleProps\n> = ({\n  name,\n  type = \"fullscreen\",\n  action,\n  formIsLoading = false,\n  loadingSuffix,\n}) => {\n  const isProcessing = useFormProcessing();\n  const { i18n, t } = useTranslation();\n\n  const labels = {\n    create: t(\"general:creating\"),\n    loading: t(\"general:loading\"),\n    update: t(\"general:updating\"),\n  };\n\n  return (\n    <LoadingOverlayToggle\n      loadingText={`${labels[action]} ${\n        loadingSuffix ? getTranslation(loadingSuffix, i18n) : \"\"\n      }`.trim()}\n      name={name}\n      show={formIsLoading || isProcessing}\n      type={type}\n    />\n  );\n};\n"],"mappings":"AAAA;;;AAEA,OAAO;AAEP,OAAOA,KAAA,MAAW;AAClB,SAASC,cAAc,QAAQ;AAG/B,SAASC,iBAAiB,QAAQ;AAClC,SAASC,iBAAiB,QAAQ;AAClC,SAASC,cAAc,QAAQ;AAE/B,MAAMC,SAAA,GAAY;AASlB,OAAO,MAAMC,cAAA,GAAgDA,CAAC;EAC5DC,iBAAiB;EACjBC,WAAW;EACXC,WAAW;EACXC,IAAA,GAAO;AAAI,CACZ;EACC,MAAM;IAAEC;EAAC,CAAE,GAAGP,cAAA;EAEd,oBACEQ,KAAA,CAAC;IACCC,SAAA,EAAW,CACTR,SAAA,EACAK,IAAA,GAAO,GAAGL,SAAA,YAAqB,GAAG,GAAGA,SAAA,WAAoB,EACzDI,WAAA,GAAc,GAAGJ,SAAA,KAAcI,WAAA,EAAa,GAAG,GAChD,CACEK,MAAM,CAACC,OAAA,EACPC,IAAI,CAAC;IACRC,KAAA,EAAO;MACLV,iBAAA,EAAmBA,iBAAA,IAAqB;IAC1C;4BAEAK,KAAA,CAAC;MAAIC,SAAA,EAAW,GAAGR,SAAA,QAAiB;8BAClCa,IAAA,CAAC;QAAIL,SAAA,EAAW,GAAGR,SAAA;uBACnBa,IAAA,CAAC;QAAIL,SAAA,EAAW,GAAGR,SAAA;uBACnBa,IAAA,CAAC;QAAIL,SAAA,EAAW,GAAGR,SAAA;uBACnBa,IAAA,CAAC;QAAIL,SAAA,EAAW,GAAGR,SAAA;uBACnBa,IAAA,CAAC;QAAIL,SAAA,EAAW,GAAGR,SAAA;;qBAGrBa,IAAA,CAAC;MAAKL,SAAA,EAAW,GAAGR,SAAA,QAAiB;gBAClCG,WAAA,IAAeG,CAAA,CAAE;;;AAI1B;AAQA,OAAO,MAAMQ,oBAAA,GAA+DA,CAAC;EAC3EC,IAAA,EAAMC,GAAG;EACTC,IAAA,GAAO,YAAY;EACnBd,WAAW;EACXE;AAAI,CACL;EACC,MAAM;IAAEa;EAAoB,CAAE,GAAGrB,iBAAA;EAEjCF,KAAA,CAAMwB,SAAS,CAAC;IACdD,oBAAA,CAAqB;MACnBD,IAAA;MACAG,SAAA,EAAWf,IAAA;MACXW,GAAA;MACAb,WAAA,EAAaA,WAAA,IAAekB;IAC9B;IAEA,OAAO;MACLH,oBAAA,CAAqB;QACnBD,IAAA;QACAG,SAAA,EAAW;QACXJ;MACF;IACF;EACF,GAAG,CAACX,IAAA,EAAMa,oBAAA,EAAsBF,GAAA,EAAKC,IAAA,EAAMd,WAAA,CAAY;EAEvD,OAAO;AACT;AAUA,OAAO,MAAMmB,wBAAA,GAETA,CAAC;EACHP,IAAI;EACJE,IAAA,GAAO,YAAY;EACnBM,MAAM;EACNC,aAAA,GAAgB,KAAK;EACrBC;AAAa,CACd;EACC,MAAMC,YAAA,GAAe5B,iBAAA;EACrB,MAAM;IAAE6B,IAAI;IAAErB;EAAC,CAAE,GAAGP,cAAA;EAEpB,MAAM6B,MAAA,GAAS;IACbC,MAAA,EAAQvB,CAAA,CAAE;IACVwB,OAAA,EAASxB,CAAA,CAAE;IACXyB,MAAA,EAAQzB,CAAA,CAAE;EACZ;EAEA,oBACEO,IAAA,CAACC,oBAAA;IACCX,WAAA,EAAa,GAAGyB,MAAM,CAACL,MAAA,CAAO,IAC5BE,aAAA,GAAgB7B,cAAA,CAAe6B,aAAA,EAAeE,IAAA,IAAQ,IACtD,CAACK,IAAI;IACPjB,IAAA,EAAMA,IAAA;IACNV,IAAA,EAAMmB,aAAA,IAAiBE,YAAA;IACvBT,IAAA,EAAMA;;AAGZ","ignoreList":[]}