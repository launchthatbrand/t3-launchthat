{"version":3,"file":"index.js","names":["React","reduceFieldsToValues","getTranslation","useModal","useAuth","useConfig","DocumentInfoProvider","useTranslation","ActionsBar","discardBulkUploadModalSlug","DiscardWithoutSaving","EditForm","FileSidebar","useFormsManager","DrawerHeader","baseClass","AddingFilesView","activeIndex","collectionSlug","docPermissions","documentSlots","forms","hasPublishPermission","hasSavePermission","hasSubmitted","activeForm","getEntityConfig","i18n","user","openModal","collectionConfig","_jsxs","className","_jsx","onClose","title","labels","singular","currentEditor","hasPublishedDoc","id","initialData","formState","initialState","isLocked","lastUpdateTime","mostRecentVersionIsAutosaved","unpublishedVersionCount","Upload","versionCount","submitted","length"],"sources":["../../../../src/elements/BulkUpload/AddingFilesView/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport React from \"react\";\nimport { reduceFieldsToValues } from \"@convexcms/core/shared\";\nimport { getTranslation } from \"@convexcms/translations\";\nimport { useModal } from \"@faceless-ui/modal\";\n\nimport { useAuth } from \"../../../providers/Auth/index.js\";\nimport { useConfig } from \"../../../providers/Config/index.js\";\nimport { DocumentInfoProvider } from \"../../../providers/DocumentInfo/index.js\";\nimport { useTranslation } from \"../../../providers/Translation/index.js\";\nimport { ActionsBar } from \"../ActionsBar/index.js\";\nimport {\n  discardBulkUploadModalSlug,\n  DiscardWithoutSaving,\n} from \"../DiscardWithoutSaving/index.js\";\nimport { EditForm } from \"../EditForm/index.js\";\nimport { FileSidebar } from \"../FileSidebar/index.js\";\nimport { useFormsManager } from \"../FormsManager/index.js\";\nimport { DrawerHeader } from \"../Header/index.js\";\n\nconst baseClass = \"bulk-upload--file-manager\";\n\nexport function AddingFilesView() {\n  const {\n    activeIndex,\n    collectionSlug,\n    docPermissions,\n    documentSlots,\n    forms,\n    hasPublishPermission,\n    hasSavePermission,\n    hasSubmitted,\n  } = useFormsManager();\n  const activeForm = forms[activeIndex];\n  const { getEntityConfig } = useConfig();\n  const { i18n } = useTranslation();\n  const { user } = useAuth();\n  const { openModal } = useModal();\n\n  const collectionConfig = getEntityConfig({ collectionSlug });\n\n  return (\n    <div className={baseClass}>\n      <FileSidebar />\n\n      <div className={`${baseClass}__editView`}>\n        <DrawerHeader\n          onClose={() => openModal(discardBulkUploadModalSlug)}\n          title={getTranslation(collectionConfig.labels.singular, i18n)}\n        />\n        {activeForm ? (\n          <DocumentInfoProvider\n            collectionSlug={collectionSlug}\n            currentEditor={user}\n            docPermissions={docPermissions}\n            hasPublishedDoc={false}\n            hasPublishPermission={hasPublishPermission}\n            hasSavePermission={hasSavePermission}\n            id={null}\n            initialData={reduceFieldsToValues(activeForm.formState, true)}\n            initialState={activeForm.formState}\n            isLocked={false}\n            key={`${activeIndex}-${forms.length}`}\n            lastUpdateTime={0}\n            mostRecentVersionIsAutosaved={false}\n            unpublishedVersionCount={0}\n            Upload={documentSlots.Upload}\n            versionCount={0}\n          >\n            <ActionsBar collectionConfig={collectionConfig} />\n            <EditForm submitted={hasSubmitted} />\n          </DocumentInfoProvider>\n        ) : null}\n      </div>\n\n      <DiscardWithoutSaving />\n    </div>\n  );\n}\n"],"mappings":"AAAA;;;AAEA,OAAO;AAEP,OAAOA,KAAA,MAAW;AAClB,SAASC,oBAAoB,QAAQ;AACrC,SAASC,cAAc,QAAQ;AAC/B,SAASC,QAAQ,QAAQ;AAEzB,SAASC,OAAO,QAAQ;AACxB,SAASC,SAAS,QAAQ;AAC1B,SAASC,oBAAoB,QAAQ;AACrC,SAASC,cAAc,QAAQ;AAC/B,SAASC,UAAU,QAAQ;AAC3B,SACEC,0BAA0B,EAC1BC,oBAAoB,QACf;AACP,SAASC,QAAQ,QAAQ;AACzB,SAASC,WAAW,QAAQ;AAC5B,SAASC,eAAe,QAAQ;AAChC,SAASC,YAAY,QAAQ;AAE7B,MAAMC,SAAA,GAAY;AAElB,OAAO,SAASC,gBAAA;EACd,MAAM;IACJC,WAAW;IACXC,cAAc;IACdC,cAAc;IACdC,aAAa;IACbC,KAAK;IACLC,oBAAoB;IACpBC,iBAAiB;IACjBC;EAAY,CACb,GAAGX,eAAA;EACJ,MAAMY,UAAA,GAAaJ,KAAK,CAACJ,WAAA,CAAY;EACrC,MAAM;IAAES;EAAe,CAAE,GAAGrB,SAAA;EAC5B,MAAM;IAAEsB;EAAI,CAAE,GAAGpB,cAAA;EACjB,MAAM;IAAEqB;EAAI,CAAE,GAAGxB,OAAA;EACjB,MAAM;IAAEyB;EAAS,CAAE,GAAG1B,QAAA;EAEtB,MAAM2B,gBAAA,GAAmBJ,eAAA,CAAgB;IAAER;EAAe;EAE1D,oBACEa,KAAA,CAAC;IAAIC,SAAA,EAAWjB,SAAA;4BACdkB,IAAA,CAACrB,WAAA,O,aAEDmB,KAAA,CAAC;MAAIC,SAAA,EAAW,GAAGjB,SAAA,YAAqB;8BACtCkB,IAAA,CAACnB,YAAA;QACCoB,OAAA,EAASA,CAAA,KAAML,SAAA,CAAUpB,0BAAA;QACzB0B,KAAA,EAAOjC,cAAA,CAAe4B,gBAAA,CAAiBM,MAAM,CAACC,QAAQ,EAAEV,IAAA;UAEzDF,UAAA,gBACCM,KAAA,CAACzB,oBAAA;QACCY,cAAA,EAAgBA,cAAA;QAChBoB,aAAA,EAAeV,IAAA;QACfT,cAAA,EAAgBA,cAAA;QAChBoB,eAAA,EAAiB;QACjBjB,oBAAA,EAAsBA,oBAAA;QACtBC,iBAAA,EAAmBA,iBAAA;QACnBiB,EAAA,EAAI;QACJC,WAAA,EAAaxC,oBAAA,CAAqBwB,UAAA,CAAWiB,SAAS,EAAE;QACxDC,YAAA,EAAclB,UAAA,CAAWiB,SAAS;QAClCE,QAAA,EAAU;QAEVC,cAAA,EAAgB;QAChBC,4BAAA,EAA8B;QAC9BC,uBAAA,EAAyB;QACzBC,MAAA,EAAQ5B,aAAA,CAAc4B,MAAM;QAC5BC,YAAA,EAAc;gCAEdhB,IAAA,CAACzB,UAAA;UAAWsB,gBAAA,EAAkBA;yBAC9BG,IAAA,CAACtB,QAAA;UAASuC,SAAA,EAAW1B;;SARhB,GAAGP,WAAA,IAAeI,KAAA,CAAM8B,MAAM,EAAE,IAUrC;qBAGNlB,IAAA,CAACvB,oBAAA;;AAGP","ignoreList":[]}