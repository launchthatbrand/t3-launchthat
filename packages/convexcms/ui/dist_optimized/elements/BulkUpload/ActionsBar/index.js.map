{"version":3,"file":"index.js","names":["React","ChevronIcon","useConfig","useTranslation","Button","EditManyBulkUploads","useFormsManager","baseClass","ActionsBar","collectionConfig","activeIndex","forms","setActiveIndex","t","_jsxs","className","_jsx","length","buttonStyle","onClick","nextIndex","type","direction","collection","Actions","getEntityConfig","collectionSlug","hasPublishPermission","hasSavePermission","saveAllDocs","filter","Boolean","join","versions","drafts","overrides","_status"],"sources":["../../../../src/elements/BulkUpload/ActionsBar/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type { ClientCollectionConfig } from \"@convexcms/core\";\nimport React from \"react\";\n\nimport { ChevronIcon } from \"../../../icons/Chevron/index.js\";\nimport { useConfig } from \"../../../providers/Config/index.js\";\nimport { useTranslation } from \"../../../providers/Translation/index.js\";\nimport { Button } from \"../../Button/index.js\";\nimport { EditManyBulkUploads } from \"../EditMany/index.js\";\nimport { useFormsManager } from \"../FormsManager/index.js\";\n\nconst baseClass = \"bulk-upload--actions-bar\";\n\ntype Props = {\n  readonly collectionConfig: ClientCollectionConfig;\n};\n\nexport function ActionsBar({ collectionConfig }: Props) {\n  const { activeIndex, forms, setActiveIndex } = useFormsManager();\n  const { t } = useTranslation();\n\n  return (\n    <div className={baseClass}>\n      <div className={`${baseClass}__navigation`}>\n        <p className={`${baseClass}__locationText`}>\n          <strong>{activeIndex + 1}</strong>\n          {\" of \"}\n          <strong>{forms.length}</strong>\n        </p>\n\n        <div className={`${baseClass}__controls`}>\n          <Button\n            aria-label={t(\"general:previous\")}\n            buttonStyle=\"none\"\n            onClick={() => {\n              const nextIndex = activeIndex - 1;\n              if (nextIndex < 0) {\n                setActiveIndex(forms.length - 1);\n              } else {\n                setActiveIndex(nextIndex);\n              }\n            }}\n            type=\"button\"\n          >\n            <ChevronIcon direction=\"left\" />\n          </Button>\n          <Button\n            aria-label={t(\"general:next\")}\n            buttonStyle=\"none\"\n            onClick={() => {\n              const nextIndex = activeIndex + 1;\n              if (nextIndex === forms.length) {\n                setActiveIndex(0);\n              } else {\n                setActiveIndex(nextIndex);\n              }\n            }}\n            type=\"button\"\n          >\n            <ChevronIcon direction=\"right\" />\n          </Button>\n        </div>\n        <EditManyBulkUploads collection={collectionConfig} />\n      </div>\n\n      <Actions className={`${baseClass}__saveButtons`} />\n    </div>\n  );\n}\n\ntype ActionsProps = {\n  readonly className?: string;\n};\nexport function Actions({ className }: ActionsProps) {\n  const { getEntityConfig } = useConfig();\n  const { t } = useTranslation();\n  const {\n    collectionSlug,\n    hasPublishPermission,\n    hasSavePermission,\n    saveAllDocs,\n  } = useFormsManager();\n\n  const collectionConfig = getEntityConfig({ collectionSlug });\n\n  return (\n    <div\n      className={[`${baseClass}__buttons`, className].filter(Boolean).join(\" \")}\n    >\n      {collectionConfig?.versions?.drafts && hasSavePermission ? (\n        <Button\n          buttonStyle=\"secondary\"\n          onClick={() => void saveAllDocs({ overrides: { _status: \"draft\" } })}\n        >\n          {t(\"version:saveDraft\")}\n        </Button>\n      ) : null}\n      {collectionConfig?.versions?.drafts && hasPublishPermission ? (\n        <Button\n          onClick={() =>\n            void saveAllDocs({ overrides: { _status: \"published\" } })\n          }\n        >\n          {t(\"version:publish\")}\n        </Button>\n      ) : null}\n\n      {!collectionConfig?.versions?.drafts && hasSavePermission ? (\n        <Button onClick={() => void saveAllDocs()}>{t(\"general:save\")}</Button>\n      ) : null}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}