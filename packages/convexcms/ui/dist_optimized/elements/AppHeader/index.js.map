{"version":3,"file":"index.js","names":["React","useEffect","useRef","useState","formatAdminURL","Account","useActions","useConfig","useTranslation","Hamburger","Link","Localizer","LocalizerLabel","useNav","NavToggler","RenderCustomComponent","StepNav","baseClass","AppHeader","CustomAvatar","CustomIcon","t","Actions","config","admin","routes","account","accountRoute","localization","adminRoute","navOpen","customControlsRef","isScrollable","setIsScrollable","checkIsScrollable","el","current","scrollable","scrollWidth","clientWidth","window","addEventListener","removeEventListener","ActionComponents","Object","values","_jsxs","className","filter","Boolean","join","_jsx","tabIndex","ref","map","Action","i","length","ariaLabel","href","path","prefetch","CustomComponent","Fallback"],"sources":["../../../src/elements/AppHeader/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { formatAdminURL } from \"@convexcms/core/shared\";\n\nimport { Account } from \"../../graphics/Account/index.js\";\nimport { useActions } from \"../../providers/Actions/index.js\";\nimport { useConfig } from \"../../providers/Config/index.js\";\nimport { useTranslation } from \"../../providers/Translation/index.js\";\nimport { Hamburger } from \"../Hamburger/index.js\";\nimport { Link } from \"../Link/index.js\";\nimport { Localizer } from \"../Localizer/index.js\";\nimport { LocalizerLabel } from \"../Localizer/LocalizerLabel/index.js\";\nimport { useNav } from \"../Nav/context.js\";\nimport { NavToggler } from \"../Nav/NavToggler/index.js\";\nimport { RenderCustomComponent } from \"../RenderCustomComponent/index.js\";\nimport { StepNav } from \"../StepNav/index.js\";\n\nconst baseClass = \"app-header\";\n\ntype Props = {\n  CustomAvatar?: React.ReactNode;\n  CustomIcon?: React.ReactNode;\n};\nexport function AppHeader({ CustomAvatar, CustomIcon }: Props) {\n  const { t } = useTranslation();\n\n  const { Actions } = useActions();\n\n  const {\n    config: {\n      admin: {\n        routes: { account: accountRoute },\n      },\n      localization,\n      routes: { admin: adminRoute },\n    },\n  } = useConfig();\n\n  const { navOpen } = useNav();\n\n  const customControlsRef = useRef<HTMLDivElement>(null);\n  const [isScrollable, setIsScrollable] = useState(false);\n\n  useEffect(() => {\n    const checkIsScrollable = () => {\n      const el = customControlsRef.current;\n      if (el) {\n        const scrollable = el.scrollWidth > el.clientWidth;\n        setIsScrollable(scrollable);\n      }\n    };\n\n    checkIsScrollable();\n    window.addEventListener(\"resize\", checkIsScrollable);\n\n    return () => {\n      window.removeEventListener(\"resize\", checkIsScrollable);\n    };\n  }, [Actions]);\n\n  const ActionComponents = Actions ? Object.values(Actions) : [];\n\n  return (\n    <header\n      className={[baseClass, navOpen && `${baseClass}--nav-open`]\n        .filter(Boolean)\n        .join(\" \")}\n    >\n      <div className={`${baseClass}__bg`} />\n      <div className={`${baseClass}__content`}>\n        <div className={`${baseClass}__wrapper`}>\n          <NavToggler\n            className={`${baseClass}__mobile-nav-toggler`}\n            tabIndex={-1}\n          >\n            <Hamburger />\n          </NavToggler>\n          <div className={`${baseClass}__controls-wrapper`}>\n            <div className={`${baseClass}__step-nav-wrapper`}>\n              <StepNav\n                className={`${baseClass}__step-nav`}\n                CustomIcon={CustomIcon}\n              />\n            </div>\n            <div className={`${baseClass}__actions-wrapper`}>\n              <div className={`${baseClass}__actions`} ref={customControlsRef}>\n                {ActionComponents.map((Action, i) => (\n                  <div\n                    className={\n                      isScrollable && i === ActionComponents.length - 1\n                        ? `${baseClass}__last-action`\n                        : \"\"\n                    }\n                    key={i}\n                  >\n                    {Action}\n                  </div>\n                ))}\n              </div>\n              {isScrollable && (\n                <div className={`${baseClass}__gradient-placeholder`} />\n              )}\n            </div>\n            {localization && (\n              <LocalizerLabel\n                ariaLabel=\"invisible\"\n                className={`${baseClass}__localizer-spacing`}\n              />\n            )}\n            <Link\n              aria-label={t(\"authentication:account\")}\n              className={`${baseClass}__account`}\n              href={formatAdminURL({ adminRoute, path: accountRoute })}\n              prefetch={false}\n              tabIndex={0}\n            >\n              <RenderCustomComponent\n                CustomComponent={CustomAvatar}\n                Fallback={<Account />}\n              />\n            </Link>\n          </div>\n        </div>\n      </div>\n      <Localizer className={`${baseClass}__localizer`} />\n    </header>\n  );\n}\n"],"mappings":"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","ignoreList":[]}