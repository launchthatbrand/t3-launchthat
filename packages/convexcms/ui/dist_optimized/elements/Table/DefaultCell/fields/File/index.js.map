{"version":3,"file":"index.js","names":["React","isImage","getBestFitFromSizes","Thumbnail","baseClass","FileCell","cellData","filename","collectionConfig","field","rowData","fieldPreviewAllowed","displayPreview","undefined","previewAllowed","upload","fileSrc","thumbnailURL","url","mimeType","sizes","width","_jsxs","className","_jsx","collectionSlug","slug","doc","size","uploadConfig","String","_Fragment"],"sources":["../../../../../../src/elements/Table/DefaultCell/fields/File/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type {\n  ClientCollectionConfig,\n  DefaultCellComponentProps,\n  TextFieldClient,\n  UploadFieldClient,\n} from \"@convexcms/core\";\nimport React from \"react\";\nimport { isImage } from \"@convexcms/core/shared\";\n\nimport { getBestFitFromSizes } from \"../../../../../utilities/getBestFitFromSizes.js\";\nimport { Thumbnail } from \"../../../../Thumbnail/index.js\";\n\nconst baseClass = \"file\";\n\nexport interface FileCellProps\n  extends DefaultCellComponentProps<TextFieldClient | UploadFieldClient> {\n  readonly collectionConfig: ClientCollectionConfig;\n}\n\nexport const FileCell: React.FC<FileCellProps> = ({\n  cellData: filename,\n  collectionConfig,\n  field,\n  rowData,\n}) => {\n  const fieldPreviewAllowed =\n    \"displayPreview\" in field ? field.displayPreview : undefined;\n  const previewAllowed =\n    fieldPreviewAllowed ?? collectionConfig.upload?.displayPreview ?? true;\n\n  if (previewAllowed) {\n    let fileSrc: string | undefined = rowData?.thumbnailURL ?? rowData?.url;\n\n    if (isImage(rowData?.mimeType)) {\n      fileSrc = getBestFitFromSizes({\n        sizes: rowData?.sizes,\n        thumbnailURL: rowData?.thumbnailURL,\n        url: rowData?.url,\n        width: rowData?.width,\n      });\n    }\n\n    return (\n      <div className={baseClass}>\n        <Thumbnail\n          className={`${baseClass}__thumbnail`}\n          collectionSlug={collectionConfig?.slug}\n          doc={{\n            ...rowData,\n            filename,\n          }}\n          fileSrc={fileSrc}\n          size=\"small\"\n          uploadConfig={collectionConfig?.upload}\n        />\n        <span className={`${baseClass}__filename`}>{String(filename)}</span>\n      </div>\n    );\n  } else {\n    return <>{String(filename)}</>;\n  }\n};\n"],"mappings":"AAAA;;;AAEA,OAAO;AAQP,OAAOA,KAAA,MAAW;AAClB,SAASC,OAAO,QAAQ;AAExB,SAASC,mBAAmB,QAAQ;AACpC,SAASC,SAAS,QAAQ;AAE1B,MAAMC,SAAA,GAAY;AAOlB,OAAO,MAAMC,QAAA,GAAoCA,CAAC;EAChDC,QAAA,EAAUC,QAAQ;EAClBC,gBAAgB;EAChBC,KAAK;EACLC;AAAO,CACR;EACC,MAAMC,mBAAA,GACJ,oBAAoBF,KAAA,GAAQA,KAAA,CAAMG,cAAc,GAAGC,SAAA;EACrD,MAAMC,cAAA,GACJH,mBAAA,IAAuBH,gBAAA,CAAiBO,MAAM,EAAEH,cAAA,IAAkB;EAEpE,IAAIE,cAAA,EAAgB;IAClB,IAAIE,OAAA,GAA8BN,OAAA,EAASO,YAAA,IAAgBP,OAAA,EAASQ,GAAA;IAEpE,IAAIjB,OAAA,CAAQS,OAAA,EAASS,QAAA,GAAW;MAC9BH,OAAA,GAAUd,mBAAA,CAAoB;QAC5BkB,KAAA,EAAOV,OAAA,EAASU,KAAA;QAChBH,YAAA,EAAcP,OAAA,EAASO,YAAA;QACvBC,GAAA,EAAKR,OAAA,EAASQ,GAAA;QACdG,KAAA,EAAOX,OAAA,EAASW;MAClB;IACF;IAEA,oBACEC,KAAA,CAAC;MAAIC,SAAA,EAAWnB,SAAA;8BACdoB,IAAA,CAACrB,SAAA;QACCoB,SAAA,EAAW,GAAGnB,SAAA,aAAsB;QACpCqB,cAAA,EAAgBjB,gBAAA,EAAkBkB,IAAA;QAClCC,GAAA,EAAK;UACH,GAAGjB,OAAO;UACVH;QACF;QACAS,OAAA,EAASA,OAAA;QACTY,IAAA,EAAK;QACLC,YAAA,EAAcrB,gBAAA,EAAkBO;uBAElCS,IAAA,CAAC;QAAKD,SAAA,EAAW,GAAGnB,SAAA,YAAqB;kBAAG0B,MAAA,CAAOvB,QAAA;;;EAGzD,OAAO;IACL,oBAAOiB,IAAA,CAAAO,SAAA;gBAAGD,MAAA,CAAOvB,QAAA;;EACnB;AACF","ignoreList":[]}