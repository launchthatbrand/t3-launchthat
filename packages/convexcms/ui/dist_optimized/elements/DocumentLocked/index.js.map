{"version":3,"file":"index.js","names":["React","useEffect","useRouteTransition","useTranslation","isClientUserObject","Button","Modal","useModal","modalSlug","baseClass","formatDate","date","Intl","DateTimeFormat","day","hour","hour12","minute","month","year","format","DocumentLocked","handleGoBack","isActive","onReadOnly","onTakeOver","updatedAt","user","closeModal","openModal","t","startRouteTransition","_jsx","className","onClose","slug","_jsxs","email","id","buttonStyle","onClick","size"],"sources":["../../../src/elements/DocumentLocked/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type { ClientUser } from \"@convexcms/core\";\nimport React, { useEffect } from \"react\";\n\nimport { useRouteTransition } from \"../../providers/RouteTransition/index.js\";\nimport { useTranslation } from \"../../providers/Translation/index.js\";\nimport { isClientUserObject } from \"../../utilities/isClientUserObject.js\";\nimport { Button } from \"../Button/index.js\";\nimport { Modal, useModal } from \"../Modal/index.js\";\n\nconst modalSlug = \"document-locked\";\n\nconst baseClass = \"document-locked\";\n\nconst formatDate = (date) => {\n  if (!date) {\n    return \"\";\n  }\n  return new Intl.DateTimeFormat(\"en-US\", {\n    day: \"numeric\",\n    hour: \"numeric\",\n    hour12: true,\n    minute: \"numeric\",\n    month: \"short\",\n    year: \"numeric\",\n  }).format(date);\n};\n\nexport const DocumentLocked: React.FC<{\n  handleGoBack: () => void;\n  isActive: boolean;\n  onReadOnly: () => void;\n  onTakeOver: () => void;\n  updatedAt?: null | number;\n  user?: ClientUser | number | string;\n}> = ({ handleGoBack, isActive, onReadOnly, onTakeOver, updatedAt, user }) => {\n  const { closeModal, openModal } = useModal();\n  const { t } = useTranslation();\n  const { startRouteTransition } = useRouteTransition();\n\n  useEffect(() => {\n    if (isActive) {\n      openModal(modalSlug);\n    } else {\n      closeModal(modalSlug);\n    }\n  }, [isActive, openModal, closeModal]);\n\n  return (\n    <Modal\n      className={baseClass}\n      onClose={() => {\n        startRouteTransition(() => handleGoBack());\n      }}\n      slug={modalSlug}\n    >\n      <div className={`${baseClass}__wrapper`}>\n        <div className={`${baseClass}__content`}>\n          <h1>{t(\"general:documentLocked\")}</h1>\n          <p>\n            <strong>\n              {isClientUserObject(user)\n                ? (user.email ?? user.id)\n                : `${t(\"general:user\")}: ${user}`}\n            </strong>{\" \"}\n            {t(\"general:currentlyEditing\")}\n          </p>\n          <p>\n            {t(\"general:editedSince\")} <strong>{formatDate(updatedAt)}</strong>\n          </p>\n        </div>\n        <div className={`${baseClass}__controls`}>\n          <Button\n            buttonStyle=\"secondary\"\n            id={`${modalSlug}-go-back`}\n            onClick={() => {\n              startRouteTransition(() => handleGoBack());\n            }}\n            size=\"large\"\n          >\n            {t(\"general:goBack\")}\n          </Button>\n          <Button\n            buttonStyle=\"secondary\"\n            id={`${modalSlug}-view-read-only`}\n            onClick={() => {\n              onReadOnly();\n              closeModal(modalSlug);\n            }}\n            size=\"large\"\n          >\n            {t(\"general:viewReadOnly\")}\n          </Button>\n          <Button\n            buttonStyle=\"primary\"\n            id={`${modalSlug}-take-over`}\n            onClick={() => {\n              void onTakeOver();\n              closeModal(modalSlug);\n            }}\n            size=\"large\"\n          >\n            {t(\"general:takeOver\")}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n"],"mappings":"AAAA;;;AAEA,OAAO;AAGP,OAAOA,KAAA,IAASC,SAAS,QAAQ;AAEjC,SAASC,kBAAkB,QAAQ;AACnC,SAASC,cAAc,QAAQ;AAC/B,SAASC,kBAAkB,QAAQ;AACnC,SAASC,MAAM,QAAQ;AACvB,SAASC,KAAK,EAAEC,QAAQ,QAAQ;AAEhC,MAAMC,SAAA,GAAY;AAElB,MAAMC,SAAA,GAAY;AAElB,MAAMC,UAAA,GAAcC,IAAA;EAClB,IAAI,CAACA,IAAA,EAAM;IACT,OAAO;EACT;EACA,OAAO,IAAIC,IAAA,CAAKC,cAAc,CAAC,SAAS;IACtCC,GAAA,EAAK;IACLC,IAAA,EAAM;IACNC,MAAA,EAAQ;IACRC,MAAA,EAAQ;IACRC,KAAA,EAAO;IACPC,IAAA,EAAM;EACR,GAAGC,MAAM,CAACT,IAAA;AACZ;AAEA,OAAO,MAAMU,cAAA,GAORA,CAAC;EAAEC,YAAY;EAAEC,QAAQ;EAAEC,UAAU;EAAEC,UAAU;EAAEC,SAAS;EAAEC;AAAI,CAAE;EACvE,MAAM;IAAEC,UAAU;IAAEC;EAAS,CAAE,GAAGtB,QAAA;EAClC,MAAM;IAAEuB;EAAC,CAAE,GAAG3B,cAAA;EACd,MAAM;IAAE4B;EAAoB,CAAE,GAAG7B,kBAAA;EAEjCD,SAAA,CAAU;IACR,IAAIsB,QAAA,EAAU;MACZM,SAAA,CAAUrB,SAAA;IACZ,OAAO;MACLoB,UAAA,CAAWpB,SAAA;IACb;EACF,GAAG,CAACe,QAAA,EAAUM,SAAA,EAAWD,UAAA,CAAW;EAEpC,oBACEI,IAAA,CAAC1B,KAAA;IACC2B,SAAA,EAAWxB,SAAA;IACXyB,OAAA,EAASA,CAAA;MACPH,oBAAA,CAAqB,MAAMT,YAAA;IAC7B;IACAa,IAAA,EAAM3B,SAAA;cAEN,aAAA4B,KAAA,CAAC;MAAIH,SAAA,EAAW,GAAGxB,SAAA,WAAoB;8BACrC2B,KAAA,CAAC;QAAIH,SAAA,EAAW,GAAGxB,SAAA,WAAoB;gCACrCuB,IAAA,CAAC;oBAAIF,CAAA,CAAE;yBACPM,KAAA,CAAC;kCACCJ,IAAA,CAAC;sBACE5B,kBAAA,CAAmBuB,IAAA,IACfA,IAAA,CAAKU,KAAK,IAAIV,IAAA,CAAKW,EAAE,GACtB,GAAGR,CAAA,CAAE,oBAAoBH,IAAA;cACrB,KACTG,CAAA,CAAE;yBAELM,KAAA,CAAC;qBACEN,CAAA,CAAE,wBAAuB,K,aAACE,IAAA,CAAC;sBAAQtB,UAAA,CAAWgB,SAAA;;;uBAGnDU,KAAA,CAAC;QAAIH,SAAA,EAAW,GAAGxB,SAAA,YAAqB;gCACtCuB,IAAA,CAAC3B,MAAA;UACCkC,WAAA,EAAY;UACZD,EAAA,EAAI,GAAG9B,SAAA,UAAmB;UAC1BgC,OAAA,EAASA,CAAA;YACPT,oBAAA,CAAqB,MAAMT,YAAA;UAC7B;UACAmB,IAAA,EAAK;oBAEJX,CAAA,CAAE;yBAELE,IAAA,CAAC3B,MAAA;UACCkC,WAAA,EAAY;UACZD,EAAA,EAAI,GAAG9B,SAAA,iBAA0B;UACjCgC,OAAA,EAASA,CAAA;YACPhB,UAAA;YACAI,UAAA,CAAWpB,SAAA;UACb;UACAiC,IAAA,EAAK;oBAEJX,CAAA,CAAE;yBAELE,IAAA,CAAC3B,MAAA;UACCkC,WAAA,EAAY;UACZD,EAAA,EAAI,GAAG9B,SAAA,YAAqB;UAC5BgC,OAAA,EAASA,CAAA;YACP,KAAKf,UAAA;YACLG,UAAA,CAAWpB,SAAA;UACb;UACAiC,IAAA,EAAK;oBAEJX,CAAA,CAAE;;;;;AAMf","ignoreList":[]}