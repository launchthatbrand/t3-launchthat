{"version":3,"file":"index.js","names":["React","useCallback","useRouter","formatAdminURL","useAuth","useConfig","useRouteTransition","useTranslation","ConfirmationModal","stayLoggedInModalSlug","StayLoggedInModal","refreshCookie","router","config","admin","routes","logout","logoutRoute","adminRoute","t","startRouteTransition","onConfirm","push","path","onCancel","_jsx","body","cancelLabel","confirmLabel","heading","modalSlug"],"sources":["../../../src/elements/StayLoggedIn/index.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useCallback } from \"react\";\nimport { useRouter } from \"next/navigation.js\";\nimport { formatAdminURL } from \"@convexcms/core/shared\";\n\nimport type { OnCancel } from \"../ConfirmationModal/index.js\";\nimport { useAuth } from \"../../providers/Auth/index.js\";\nimport { useConfig } from \"../../providers/Config/index.js\";\nimport { useRouteTransition } from \"../../providers/RouteTransition/index.js\";\nimport { useTranslation } from \"../../providers/Translation/index.js\";\nimport { ConfirmationModal } from \"../ConfirmationModal/index.js\";\n\nexport const stayLoggedInModalSlug = \"stay-logged-in\";\n\nexport const StayLoggedInModal: React.FC = () => {\n  const { refreshCookie } = useAuth();\n\n  const router = useRouter();\n  const { config } = useConfig();\n\n  const {\n    admin: {\n      routes: { logout: logoutRoute },\n    },\n    routes: { admin: adminRoute },\n  } = config;\n\n  const { t } = useTranslation();\n  const { startRouteTransition } = useRouteTransition();\n\n  const onConfirm = useCallback(() => {\n    return startRouteTransition(() =>\n      router.push(\n        formatAdminURL({\n          adminRoute,\n          path: logoutRoute,\n        }),\n      ),\n    );\n  }, [router, startRouteTransition, adminRoute, logoutRoute]);\n\n  const onCancel: OnCancel = useCallback(() => {\n    refreshCookie();\n  }, [refreshCookie]);\n\n  return (\n    <ConfirmationModal\n      body={t(\"authentication:youAreInactive\")}\n      cancelLabel={t(\"authentication:stayLoggedIn\")}\n      confirmLabel={t(\"authentication:logOut\")}\n      heading={t(\"authentication:stayLoggedIn\")}\n      modalSlug={stayLoggedInModalSlug}\n      onCancel={onCancel}\n      onConfirm={onConfirm}\n    />\n  );\n};\n"],"mappings":"AAAA;;;AAEA,OAAOA,KAAA,IAASC,WAAW,QAAQ;AACnC,SAASC,SAAS,QAAQ;AAC1B,SAASC,cAAc,QAAQ;AAG/B,SAASC,OAAO,QAAQ;AACxB,SAASC,SAAS,QAAQ;AAC1B,SAASC,kBAAkB,QAAQ;AACnC,SAASC,cAAc,QAAQ;AAC/B,SAASC,iBAAiB,QAAQ;AAElC,OAAO,MAAMC,qBAAA,GAAwB;AAErC,OAAO,MAAMC,iBAAA,GAA8BA,CAAA;EACzC,MAAM;IAAEC;EAAa,CAAE,GAAGP,OAAA;EAE1B,MAAMQ,MAAA,GAASV,SAAA;EACf,MAAM;IAAEW;EAAM,CAAE,GAAGR,SAAA;EAEnB,MAAM;IACJS,KAAA,EAAO;MACLC,MAAA,EAAQ;QAAEC,MAAA,EAAQC;MAAW;IAAE,CAChC;IACDF,MAAA,EAAQ;MAAED,KAAA,EAAOI;IAAU;EAAE,CAC9B,GAAGL,MAAA;EAEJ,MAAM;IAAEM;EAAC,CAAE,GAAGZ,cAAA;EACd,MAAM;IAAEa;EAAoB,CAAE,GAAGd,kBAAA;EAEjC,MAAMe,SAAA,GAAYpB,WAAA,CAAY;IAC5B,OAAOmB,oBAAA,CAAqB,MAC1BR,MAAA,CAAOU,IAAI,CACTnB,cAAA,CAAe;MACbe,UAAA;MACAK,IAAA,EAAMN;IACR;EAGN,GAAG,CAACL,MAAA,EAAQQ,oBAAA,EAAsBF,UAAA,EAAYD,WAAA,CAAY;EAE1D,MAAMO,QAAA,GAAqBvB,WAAA,CAAY;IACrCU,aAAA;EACF,GAAG,CAACA,aAAA,CAAc;EAElB,oBACEc,IAAA,CAACjB,iBAAA;IACCkB,IAAA,EAAMP,CAAA,CAAE;IACRQ,WAAA,EAAaR,CAAA,CAAE;IACfS,YAAA,EAAcT,CAAA,CAAE;IAChBU,OAAA,EAASV,CAAA,CAAE;IACXW,SAAA,EAAWrB,qBAAA;IACXe,QAAA,EAAUA,QAAA;IACVH,SAAA,EAAWA;;AAGjB","ignoreList":[]}