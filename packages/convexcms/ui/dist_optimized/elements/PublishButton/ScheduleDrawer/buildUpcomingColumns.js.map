{"version":3,"file":"buildUpcomingColumns.js","names":["React","getTranslation","formatDate","Button","Pill","buildUpcomingColumns","dateFormat","deleteHandler","docs","i18n","localization","supportedTimezones","t","columns","accessor","active","field","name","type","Heading","_jsx","renderedCells","map","doc","input","_jsxs","pillStyle","id","date","waitUntil","pattern","timezone","matchedTimezone","find","value","label","push","locale","matchedLocale","locales","code","buttonStyle","className","icon","onClick","e","preventDefault","tooltip"],"sources":["../../../../src/elements/PublishButton/ScheduleDrawer/buildUpcomingColumns.tsx"],"sourcesContent":["import type { ClientConfig, Column } from \"@convexcms/core\";\nimport type { I18nClient, TFunction } from \"@convexcms/translations\";\nimport React from \"react\";\nimport { getTranslation } from \"@convexcms/translations\";\n\nimport type { UpcomingEvent } from \"./types.js\";\nimport { formatDate } from \"../../../utilities/formatDocTitle/formatDateTitle.js\";\nimport { Button } from \"../../Button/index.js\";\nimport { Pill } from \"../../Pill/index.js\";\n\ntype Args = {\n  dateFormat: string;\n  deleteHandler: (id: number | string) => void;\n  docs: UpcomingEvent[];\n  i18n: I18nClient;\n  localization: ClientConfig[\"localization\"];\n  supportedTimezones: ClientConfig[\"admin\"][\"timezones\"][\"supportedTimezones\"];\n  t: TFunction;\n};\n\nexport const buildUpcomingColumns = ({\n  dateFormat,\n  deleteHandler,\n  docs,\n  i18n,\n  localization,\n  supportedTimezones,\n  t,\n}: Args): Column[] => {\n  const columns: Column[] = [\n    {\n      accessor: \"input.type\",\n      active: true,\n      field: {\n        name: \"\",\n        type: \"text\",\n      },\n      Heading: <span>{t(\"version:type\")}</span>,\n      renderedCells: docs.map((doc) => {\n        const type = doc.input?.type;\n\n        return (\n          <Pill\n            key={doc.id}\n            pillStyle={type === \"publish\" ? \"success\" : \"warning\"}\n          >\n            {type === \"publish\" && t(\"version:publish\")}\n            {type === \"unpublish\" && t(\"version:unpublish\")}\n          </Pill>\n        );\n      }),\n    },\n    {\n      accessor: \"waitUntil\",\n      active: true,\n      field: {\n        name: \"\",\n        type: \"date\",\n      },\n      Heading: <span>{t(\"general:time\")}</span>,\n      renderedCells: docs.map((doc) => (\n        <span key={doc.id}>\n          {formatDate({\n            date: doc.waitUntil,\n            i18n,\n            pattern: dateFormat,\n            timezone: doc.input.timezone,\n          })}\n        </span>\n      )),\n    },\n    {\n      accessor: \"input.timezone\",\n      active: true,\n      field: {\n        name: \"\",\n        type: \"text\",\n      },\n      Heading: <span>{t(\"general:timezone\")}</span>,\n      renderedCells: docs.map((doc) => {\n        const matchedTimezone = supportedTimezones.find(\n          (timezone) => timezone.value === doc.input.timezone,\n        );\n\n        const timezone = matchedTimezone?.label || doc.input.timezone;\n\n        return <span key={doc.id}>{timezone || t(\"general:noValue\")}</span>;\n      }),\n    },\n  ];\n\n  if (localization) {\n    columns.push({\n      accessor: \"input.locale\",\n      active: true,\n      field: {\n        name: \"\",\n        type: \"text\",\n      },\n      Heading: <span>{t(\"general:locale\")}</span>,\n      renderedCells: docs.map((doc) => {\n        if (doc.input.locale) {\n          const matchedLocale = localization.locales.find(\n            (locale) => locale.code === doc.input.locale,\n          );\n          if (matchedLocale) {\n            return (\n              <span key={doc.id}>\n                {getTranslation(matchedLocale.label, i18n)}\n              </span>\n            );\n          }\n        }\n\n        return <span key={doc.id}>{t(\"general:all\")}</span>;\n      }),\n    });\n  }\n\n  columns.push({\n    accessor: \"delete\",\n    active: true,\n    field: {\n      name: \"delete\",\n      type: \"text\",\n    },\n    Heading: <span>{t(\"general:delete\")}</span>,\n    renderedCells: docs.map((doc) => (\n      <Button\n        buttonStyle=\"icon-label\"\n        className=\"schedule-publish__delete\"\n        icon=\"x\"\n        key={doc.id}\n        onClick={(e) => {\n          e.preventDefault();\n          deleteHandler(doc.id);\n        }}\n        tooltip={t(\"general:delete\")}\n      />\n    )),\n  });\n\n  return columns;\n};\n"],"mappings":"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","ignoreList":[]}