{"version":3,"file":"index.js","names":["React","useState","ChevronIcon","usePreferences","AnimateHeight","useNav","baseClass","preferencesKey","NavGroup","children","isOpen","isOpenFromProps","label","collapsed","setCollapsed","animate","setAnimate","setPreference","navOpen","toggleCollapsed","newGroupPrefs","open","Boolean","groups","_jsxs","className","filter","join","id","onClick","tabIndex","type","_jsx","direction","undefined","duration","height","Fragment"],"sources":["../../../src/elements/NavGroup/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type { NavPreferences } from \"@convexcms/core\";\nimport React, { useState } from \"react\";\n\nimport { ChevronIcon } from \"../../icons/Chevron/index.js\";\nimport { usePreferences } from \"../../providers/Preferences/index.js\";\nimport { AnimateHeight } from \"../AnimateHeight/index.js\";\nimport { useNav } from \"../Nav/context.js\";\n\nconst baseClass = \"nav-group\";\n\ntype Props = {\n  children: React.ReactNode;\n  isOpen?: boolean;\n  label: string;\n};\n\nconst preferencesKey = \"nav\";\n\nexport const NavGroup: React.FC<Props> = ({\n  children,\n  isOpen: isOpenFromProps,\n  label,\n}) => {\n  const [collapsed, setCollapsed] = useState(\n    typeof isOpenFromProps !== \"undefined\" ? !isOpenFromProps : false,\n  );\n\n  const [animate, setAnimate] = useState(false);\n  const { setPreference } = usePreferences();\n  const { navOpen } = useNav();\n\n  if (label) {\n    const toggleCollapsed = () => {\n      setAnimate(true);\n      const newGroupPrefs: NavPreferences[\"groups\"] = {};\n\n      if (!newGroupPrefs?.[label]) {\n        newGroupPrefs[label] = { open: Boolean(collapsed) };\n      } else {\n        newGroupPrefs[label].open = Boolean(collapsed);\n      }\n\n      void setPreference(preferencesKey, { groups: newGroupPrefs }, true);\n      setCollapsed(!collapsed);\n    };\n\n    return (\n      <div\n        className={[\n          `${baseClass}`,\n          `${label}`,\n          collapsed && `${baseClass}--collapsed`,\n        ]\n          .filter(Boolean)\n          .join(\" \")}\n        id={`nav-group-${label}`}\n      >\n        <button\n          className={[\n            `${baseClass}__toggle`,\n            `${baseClass}__toggle--${collapsed ? \"collapsed\" : \"open\"}`,\n          ]\n            .filter(Boolean)\n            .join(\" \")}\n          onClick={toggleCollapsed}\n          tabIndex={!navOpen ? -1 : 0}\n          type=\"button\"\n        >\n          <div className={`${baseClass}__label`}>{label}</div>\n          <div className={`${baseClass}__indicator`}>\n            <ChevronIcon\n              className={`${baseClass}__indicator`}\n              direction={!collapsed ? \"up\" : undefined}\n            />\n          </div>\n        </button>\n        <AnimateHeight\n          duration={animate ? 200 : 0}\n          height={collapsed ? 0 : \"auto\"}\n        >\n          <div className={`${baseClass}__content`}>{children}</div>\n        </AnimateHeight>\n      </div>\n    );\n  }\n\n  return <React.Fragment>{children}</React.Fragment>;\n};\n"],"mappings":"AAAA;;;AAEA,OAAO;AAGP,OAAOA,KAAA,IAASC,QAAQ,QAAQ;AAEhC,SAASC,WAAW,QAAQ;AAC5B,SAASC,cAAc,QAAQ;AAC/B,SAASC,aAAa,QAAQ;AAC9B,SAASC,MAAM,QAAQ;AAEvB,MAAMC,SAAA,GAAY;AAQlB,MAAMC,cAAA,GAAiB;AAEvB,OAAO,MAAMC,QAAA,GAA4BA,CAAC;EACxCC,QAAQ;EACRC,MAAA,EAAQC,eAAe;EACvBC;AAAK,CACN;EACC,MAAM,CAACC,SAAA,EAAWC,YAAA,CAAa,GAAGb,QAAA,CAChC,OAAOU,eAAA,KAAoB,cAAc,CAACA,eAAA,GAAkB;EAG9D,MAAM,CAACI,OAAA,EAASC,UAAA,CAAW,GAAGf,QAAA,CAAS;EACvC,MAAM;IAAEgB;EAAa,CAAE,GAAGd,cAAA;EAC1B,MAAM;IAAEe;EAAO,CAAE,GAAGb,MAAA;EAEpB,IAAIO,KAAA,EAAO;IACT,MAAMO,eAAA,GAAkBA,CAAA;MACtBH,UAAA,CAAW;MACX,MAAMI,aAAA,GAA0C,CAAC;MAEjD,IAAI,CAACA,aAAA,GAAgBR,KAAA,CAAM,EAAE;QAC3BQ,aAAa,CAACR,KAAA,CAAM,GAAG;UAAES,IAAA,EAAMC,OAAA,CAAQT,SAAA;QAAW;MACpD,OAAO;QACLO,aAAa,CAACR,KAAA,CAAM,CAACS,IAAI,GAAGC,OAAA,CAAQT,SAAA;MACtC;MAEA,KAAKI,aAAA,CAAcV,cAAA,EAAgB;QAAEgB,MAAA,EAAQH;MAAc,GAAG;MAC9DN,YAAA,CAAa,CAACD,SAAA;IAChB;IAEA,oBACEW,KAAA,CAAC;MACCC,SAAA,EAAW,CACT,GAAGnB,SAAA,EAAW,EACd,GAAGM,KAAA,EAAO,EACVC,SAAA,IAAa,GAAGP,SAAA,aAAsB,CACvC,CACEoB,MAAM,CAACJ,OAAA,EACPK,IAAI,CAAC;MACRC,EAAA,EAAI,aAAahB,KAAA,EAAO;8BAExBY,KAAA,CAAC;QACCC,SAAA,EAAW,CACT,GAAGnB,SAAA,UAAmB,EACtB,GAAGA,SAAA,aAAsBO,SAAA,GAAY,cAAc,QAAQ,CAC5D,CACEa,MAAM,CAACJ,OAAA,EACPK,IAAI,CAAC;QACRE,OAAA,EAASV,eAAA;QACTW,QAAA,EAAU,CAACZ,OAAA,GAAU,CAAC,IAAI;QAC1Ba,IAAA,EAAK;gCAELC,IAAA,CAAC;UAAIP,SAAA,EAAW,GAAGnB,SAAA,SAAkB;oBAAGM;yBACxCoB,IAAA,CAAC;UAAIP,SAAA,EAAW,GAAGnB,SAAA,aAAsB;oBACvC,aAAA0B,IAAA,CAAC9B,WAAA;YACCuB,SAAA,EAAW,GAAGnB,SAAA,aAAsB;YACpC2B,SAAA,EAAW,CAACpB,SAAA,GAAY,OAAOqB;;;uBAIrCF,IAAA,CAAC5B,aAAA;QACC+B,QAAA,EAAUpB,OAAA,GAAU,MAAM;QAC1BqB,MAAA,EAAQvB,SAAA,GAAY,IAAI;kBAExB,aAAAmB,IAAA,CAAC;UAAIP,SAAA,EAAW,GAAGnB,SAAA,WAAoB;oBAAGG;;;;EAIlD;EAEA,oBAAOuB,IAAA,CAAChC,KAAA,CAAMqC,QAAQ;cAAE5B;;AAC1B","ignoreList":[]}