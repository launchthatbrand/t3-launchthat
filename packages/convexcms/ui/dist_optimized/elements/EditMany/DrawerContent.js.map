{"version":3,"file":"DrawerContent.js","names":["React","useCallback","useEffect","useMemo","useState","useRouter","useSearchParams","mergeListSearchAndWhere","unflatten","getTranslation","useModal","qs","useForm","Form","RenderField","FormSubmit","XIcon","useAuth","useConfig","DocumentInfoProvider","OperationContext","useRouteCache","SelectAllStatus","useSelection","useServerFunctions","useTranslation","abortAndIgnore","handleAbortRef","parseSearchParams","FieldSelect","baseClass","Submit","action","disabled","submit","t","save","method","skipValidation","_jsx","className","onClick","PublishButton","overrides","_status","SaveDraftButton","buttonStyle","EditManyDrawerContent","props","collection","fields","labels","plural","singular","drawerSlug","selectedFields","setSelectedFields","permissions","user","closeModal","config","routes","api","apiRoute","serverURL","getFormState","count","getQueryParams","selectAll","i18n","isInitializing","setIsInitializing","router","abortFormStateRef","useRef","clearRouteCache","collectionPermissions","collections","slug","searchParams","select","reduce","acc","option","value","path","onChange","formState","prevFormState","submitted","controller","state","collectionSlug","docPermissions","docPreferences","operation","schemaPath","signal","current","abortFormState","queryString","queryWithSearch","collectionConfig","search","get","onSuccess","replace","stringify","page","AllAvailable","undefined","addQueryPrefix","onFieldSelect","dispatchFields","selected","type","currentEditor","hasPublishedDoc","id","initialData","isLocked","lastUpdateTime","mostRecentVersionIsAutosaved","unpublishedVersionCount","versionCount","_jsxs","label","length","map","i","field","fieldPermissions","clientFieldConfig","indexPath","parentPath","parentSchemaPath","versions","drafts","Fragment"],"sources":["../../../src/elements/EditMany/DrawerContent.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\nimport \"../../forms/RenderFields/index.scss\";\n\nimport type { SelectType } from \"@convexcms/core\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation.js\";\nimport { mergeListSearchAndWhere, unflatten } from \"@convexcms/core/shared\";\nimport { getTranslation } from \"@convexcms/translations\";\nimport { useModal } from \"@faceless-ui/modal\";\nimport * as qs from \"qs-esm\";\n\nimport type { FormProps } from \"../../forms/Form/index.js\";\nimport type { OnFieldSelect } from \"../FieldSelect/index.js\";\nimport type { FieldOption } from \"../FieldSelect/reduceFieldOptions.js\";\nimport type { EditManyProps } from \"./index.js\";\nimport { useForm } from \"../../forms/Form/context.js\";\nimport { Form } from \"../../forms/Form/index.js\";\nimport { RenderField } from \"../../forms/RenderFields/RenderField.js\";\nimport { FormSubmit } from \"../../forms/Submit/index.js\";\nimport { XIcon } from \"../../icons/X/index.js\";\nimport { useAuth } from \"../../providers/Auth/index.js\";\nimport { useConfig } from \"../../providers/Config/index.js\";\nimport { DocumentInfoProvider } from \"../../providers/DocumentInfo/index.js\";\nimport { OperationContext } from \"../../providers/Operation/index.js\";\nimport { useRouteCache } from \"../../providers/RouteCache/index.js\";\nimport {\n  SelectAllStatus,\n  useSelection,\n} from \"../../providers/Selection/index.js\";\nimport { useServerFunctions } from \"../../providers/ServerFunctions/index.js\";\nimport { useTranslation } from \"../../providers/Translation/index.js\";\nimport {\n  abortAndIgnore,\n  handleAbortRef,\n} from \"../../utilities/abortAndIgnore.js\";\nimport { parseSearchParams } from \"../../utilities/parseSearchParams.js\";\nimport { FieldSelect } from \"../FieldSelect/index.js\";\nimport { baseClass } from \"./index.js\";\n\nconst Submit: React.FC<{\n  readonly action: string;\n  readonly disabled: boolean;\n}> = ({ action, disabled }) => {\n  const { submit } = useForm();\n  const { t } = useTranslation();\n\n  const save = useCallback(() => {\n    void submit({\n      action,\n      method: \"PATCH\",\n      skipValidation: true,\n    });\n  }, [action, submit]);\n\n  return (\n    <FormSubmit\n      className={`${baseClass}__save`}\n      disabled={disabled}\n      onClick={save}\n    >\n      {t(\"general:save\")}\n    </FormSubmit>\n  );\n};\n\nconst PublishButton: React.FC<{\n  action: string;\n  disabled: boolean;\n}> = ({ action, disabled }) => {\n  const { submit } = useForm();\n  const { t } = useTranslation();\n\n  const save = useCallback(() => {\n    void submit({\n      action,\n      method: \"PATCH\",\n      overrides: {\n        _status: \"published\",\n      },\n      skipValidation: true,\n    });\n  }, [action, submit]);\n\n  return (\n    <FormSubmit\n      className={`${baseClass}__publish`}\n      disabled={disabled}\n      onClick={save}\n    >\n      {t(\"version:publishChanges\")}\n    </FormSubmit>\n  );\n};\n\nconst SaveDraftButton: React.FC<{\n  action: string;\n  disabled: boolean;\n}> = ({ action, disabled }) => {\n  const { submit } = useForm();\n  const { t } = useTranslation();\n\n  const save = useCallback(() => {\n    void submit({\n      action,\n      method: \"PATCH\",\n      overrides: {\n        _status: \"draft\",\n      },\n      skipValidation: true,\n    });\n  }, [action, submit]);\n\n  return (\n    <FormSubmit\n      buttonStyle=\"secondary\"\n      className={`${baseClass}__draft`}\n      disabled={disabled}\n      onClick={save}\n    >\n      {t(\"version:saveDraft\")}\n    </FormSubmit>\n  );\n};\n\nexport const EditManyDrawerContent: React.FC<\n  {\n    drawerSlug: string;\n    selectedFields: FieldOption[];\n    setSelectedFields: (fields: FieldOption[]) => void;\n  } & EditManyProps\n> = (props) => {\n  const {\n    collection: { fields, labels: { plural, singular } } = {},\n    collection,\n    drawerSlug,\n    selectedFields,\n    setSelectedFields,\n  } = props;\n\n  const { permissions, user } = useAuth();\n\n  const { closeModal } = useModal();\n\n  const {\n    config: {\n      routes: { api: apiRoute },\n      serverURL,\n    },\n  } = useConfig();\n\n  const { getFormState } = useServerFunctions();\n\n  const { count, getQueryParams, selectAll } = useSelection();\n  const { i18n, t } = useTranslation();\n\n  const [isInitializing, setIsInitializing] = useState(false);\n\n  const router = useRouter();\n  const abortFormStateRef = React.useRef<AbortController>(null);\n  const { clearRouteCache } = useRouteCache();\n  const collectionPermissions = permissions?.collections?.[collection.slug];\n  const searchParams = useSearchParams();\n\n  const select = useMemo<SelectType>(() => {\n    return unflatten(\n      selectedFields.reduce((acc, option) => {\n        acc[option.value.path] = true;\n        return acc;\n      }, {} as SelectType),\n    );\n  }, [selectedFields]);\n\n  const onChange: FormProps[\"onChange\"][0] = useCallback(\n    async ({ formState: prevFormState, submitted }) => {\n      const controller = handleAbortRef(abortFormStateRef);\n\n      const { state } = await getFormState({\n        collectionSlug: collection.slug,\n        docPermissions: collectionPermissions,\n        docPreferences: null,\n        formState: prevFormState,\n        operation: \"update\",\n        schemaPath: collection.slug,\n        select,\n        signal: controller.signal,\n        skipValidation: !submitted,\n      });\n\n      abortFormStateRef.current = null;\n\n      return state;\n    },\n    [getFormState, collection, collectionPermissions, select],\n  );\n\n  useEffect(() => {\n    const abortFormState = abortFormStateRef.current;\n\n    return () => {\n      abortAndIgnore(abortFormState);\n    };\n  }, []);\n\n  const queryString = useMemo(() => {\n    const queryWithSearch = mergeListSearchAndWhere({\n      collectionConfig: collection,\n      search: searchParams.get(\"search\"),\n    });\n\n    return getQueryParams(queryWithSearch);\n  }, [collection, searchParams, getQueryParams]);\n\n  const onSuccess = () => {\n    router.replace(\n      qs.stringify(\n        {\n          ...parseSearchParams(searchParams),\n          page: selectAll === SelectAllStatus.AllAvailable ? \"1\" : undefined,\n        },\n        { addQueryPrefix: true },\n      ),\n    );\n    clearRouteCache(); // Use clearRouteCache instead of router.refresh, as we only need to clear the cache if the user has route caching enabled - clearRouteCache checks for this\n    closeModal(drawerSlug);\n  };\n\n  const onFieldSelect = useCallback<OnFieldSelect>(\n    async ({ dispatchFields, formState, selected }) => {\n      setIsInitializing(true);\n\n      setSelectedFields(selected || []);\n\n      const { state } = await getFormState({\n        collectionSlug: collection.slug,\n        docPermissions: collectionPermissions,\n        docPreferences: null,\n        formState,\n        operation: \"update\",\n        schemaPath: collection.slug,\n        select: unflatten(\n          selected.reduce((acc, option) => {\n            acc[option.value.path] = true;\n            return acc;\n          }, {} as SelectType),\n        ),\n        skipValidation: true,\n      });\n\n      dispatchFields({\n        type: \"UPDATE_MANY\",\n        formState: state,\n      });\n\n      setIsInitializing(false);\n    },\n    [getFormState, collection.slug, collectionPermissions, setSelectedFields],\n  );\n\n  return (\n    <DocumentInfoProvider\n      collectionSlug={collection.slug}\n      currentEditor={user}\n      hasPublishedDoc={false}\n      id={null}\n      initialData={{}}\n      isLocked={false}\n      lastUpdateTime={0}\n      mostRecentVersionIsAutosaved={false}\n      unpublishedVersionCount={0}\n      versionCount={0}\n    >\n      <OperationContext value=\"update\">\n        <div className={`${baseClass}__main`}>\n          <div className={`${baseClass}__header`}>\n            <h2 className={`${baseClass}__header__title`}>\n              {t(\"general:editingLabel\", {\n                count,\n                label: getTranslation(count > 1 ? plural : singular, i18n),\n              })}\n            </h2>\n            <button\n              aria-label={t(\"general:close\")}\n              className={`${baseClass}__header__close`}\n              id={`close-drawer__${drawerSlug}`}\n              onClick={() => closeModal(drawerSlug)}\n              type=\"button\"\n            >\n              <XIcon />\n            </button>\n          </div>\n          <Form\n            className={`${baseClass}__form`}\n            isInitializing={isInitializing}\n            onChange={[onChange]}\n            onSuccess={onSuccess}\n          >\n            <FieldSelect\n              fields={fields}\n              onChange={onFieldSelect}\n              permissions={collectionPermissions.fields}\n            />\n            {selectedFields.length === 0 ? null : (\n              <div className=\"render-fields\">\n                {selectedFields.map((option, i) => {\n                  const {\n                    value: { field, fieldPermissions, path },\n                  } = option;\n\n                  return (\n                    <RenderField\n                      clientFieldConfig={field}\n                      indexPath=\"\"\n                      key={`${path}-${i}`}\n                      parentPath=\"\"\n                      parentSchemaPath=\"\"\n                      path={path}\n                      permissions={fieldPermissions}\n                    />\n                  );\n                })}\n              </div>\n            )}\n            <div className={`${baseClass}__sidebar-wrap`}>\n              <div className={`${baseClass}__sidebar`}>\n                <div className={`${baseClass}__sidebar-sticky-wrap`}>\n                  <div className={`${baseClass}__document-actions`}>\n                    {collection?.versions?.drafts ? (\n                      <React.Fragment>\n                        <SaveDraftButton\n                          action={`${serverURL}${apiRoute}/${collection.slug}${queryString}&draft=true`}\n                          disabled={selectedFields.length === 0}\n                        />\n                        <PublishButton\n                          action={`${serverURL}${apiRoute}/${collection.slug}${queryString}&draft=true`}\n                          disabled={selectedFields.length === 0}\n                        />\n                      </React.Fragment>\n                    ) : (\n                      <Submit\n                        action={`${serverURL}${apiRoute}/${collection.slug}${queryString}`}\n                        disabled={selectedFields.length === 0}\n                      />\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </Form>\n        </div>\n      </OperationContext>\n    </DocumentInfoProvider>\n  );\n};\n"],"mappings":"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","ignoreList":[]}