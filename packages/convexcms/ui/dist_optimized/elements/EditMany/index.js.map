{"version":3,"file":"index.js","names":["React","useState","useModal","useAuth","EditDepthProvider","SelectAllStatus","useSelection","useTranslation","Drawer","EditManyDrawerContent","baseClass","EditMany","props","collection","slug","permissions","openModal","selectAll","t","selectedFields","setSelectedFields","collectionPermissions","collections","drawerSlug","None","update","_jsxs","className","_jsx","onClick","type","Header"],"sources":["../../../src/elements/EditMany/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type { ClientCollectionConfig } from \"@convexcms/core\";\nimport React, { useState } from \"react\";\nimport { useModal } from \"@faceless-ui/modal\";\n\nimport type { FieldOption } from \"../FieldSelect/reduceFieldOptions.js\";\nimport { useAuth } from \"../../providers/Auth/index.js\";\nimport { EditDepthProvider } from \"../../providers/EditDepth/index.js\";\nimport {\n  SelectAllStatus,\n  useSelection,\n} from \"../../providers/Selection/index.js\";\nimport { useTranslation } from \"../../providers/Translation/index.js\";\nimport { Drawer } from \"../Drawer/index.js\";\nimport { EditManyDrawerContent } from \"./DrawerContent.js\";\n\nexport const baseClass = \"edit-many\";\n\nexport type EditManyProps = {\n  readonly collection: ClientCollectionConfig;\n};\n\nexport const EditMany: React.FC<EditManyProps> = (props) => {\n  const {\n    collection: { slug },\n  } = props;\n\n  const { permissions } = useAuth();\n  const { openModal } = useModal();\n\n  const { selectAll } = useSelection();\n  const { t } = useTranslation();\n\n  const [selectedFields, setSelectedFields] = useState<FieldOption[]>([]);\n\n  const collectionPermissions = permissions?.collections?.[slug];\n\n  const drawerSlug = `edit-${slug}`;\n\n  if (selectAll === SelectAllStatus.None || !collectionPermissions?.update) {\n    return null;\n  }\n\n  return (\n    <div className={baseClass}>\n      <button\n        aria-label={t(\"general:edit\")}\n        className={`${baseClass}__toggle`}\n        onClick={() => {\n          openModal(drawerSlug);\n          setSelectedFields([]);\n        }}\n        type=\"button\"\n      >\n        {t(\"general:edit\")}\n      </button>\n      <EditDepthProvider>\n        <Drawer Header={null} slug={drawerSlug}>\n          <EditManyDrawerContent\n            collection={props.collection}\n            drawerSlug={drawerSlug}\n            selectedFields={selectedFields}\n            setSelectedFields={setSelectedFields}\n          />\n        </Drawer>\n      </EditDepthProvider>\n    </div>\n  );\n};\n"],"mappings":"AAAA;;;AAEA,OAAO;AAGP,OAAOA,KAAA,IAASC,QAAQ,QAAQ;AAChC,SAASC,QAAQ,QAAQ;AAGzB,SAASC,OAAO,QAAQ;AACxB,SAASC,iBAAiB,QAAQ;AAClC,SACEC,eAAe,EACfC,YAAY,QACP;AACP,SAASC,cAAc,QAAQ;AAC/B,SAASC,MAAM,QAAQ;AACvB,SAASC,qBAAqB,QAAQ;AAEtC,OAAO,MAAMC,SAAA,GAAY;AAMzB,OAAO,MAAMC,QAAA,GAAqCC,KAAA;EAChD,MAAM;IACJC,UAAA,EAAY;MAAEC;IAAI;EAAE,CACrB,GAAGF,KAAA;EAEJ,MAAM;IAAEG;EAAW,CAAE,GAAGZ,OAAA;EACxB,MAAM;IAAEa;EAAS,CAAE,GAAGd,QAAA;EAEtB,MAAM;IAAEe;EAAS,CAAE,GAAGX,YAAA;EACtB,MAAM;IAAEY;EAAC,CAAE,GAAGX,cAAA;EAEd,MAAM,CAACY,cAAA,EAAgBC,iBAAA,CAAkB,GAAGnB,QAAA,CAAwB,EAAE;EAEtE,MAAMoB,qBAAA,GAAwBN,WAAA,EAAaO,WAAA,GAAcR,IAAA,CAAK;EAE9D,MAAMS,UAAA,GAAa,QAAQT,IAAA,EAAM;EAEjC,IAAIG,SAAA,KAAcZ,eAAA,CAAgBmB,IAAI,IAAI,CAACH,qBAAA,EAAuBI,MAAA,EAAQ;IACxE,OAAO;EACT;EAEA,oBACEC,KAAA,CAAC;IAAIC,SAAA,EAAWjB,SAAA;4BACdkB,IAAA,CAAC;MACC,cAAYV,CAAA,CAAE;MACdS,SAAA,EAAW,GAAGjB,SAAA,UAAmB;MACjCmB,OAAA,EAASA,CAAA;QACPb,SAAA,CAAUO,UAAA;QACVH,iBAAA,CAAkB,EAAE;MACtB;MACAU,IAAA,EAAK;gBAEJZ,CAAA,CAAE;qBAELU,IAAA,CAACxB,iBAAA;gBACC,aAAAwB,IAAA,CAACpB,MAAA;QAAOuB,MAAA,EAAQ;QAAMjB,IAAA,EAAMS,UAAA;kBAC1B,aAAAK,IAAA,CAACnB,qBAAA;UACCI,UAAA,EAAYD,KAAA,CAAMC,UAAU;UAC5BU,UAAA,EAAYA,UAAA;UACZJ,cAAA,EAAgBA,cAAA;UAChBC,iBAAA,EAAmBA;;;;;AAM/B","ignoreList":[]}