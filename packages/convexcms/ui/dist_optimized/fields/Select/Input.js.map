{"version":3,"file":"Input.js","names":["React","getTranslation","ReactSelect","RenderCustomComponent","FieldDescription","FieldError","FieldLabel","useTranslation","fieldBaseClass","SelectInput","props","AfterInput","BeforeInput","className","Description","description","Error","hasMany","isClearable","isSortable","label","Label","localized","onChange","onInputChange","options","path","readOnly","required","showError","style","value","i18n","valueToRender","Array","isArray","map","val","matchingOption","find","option","_jsxs","filter","Boolean","join","id","replace","_jsx","CustomComponent","Fallback","disabled","isMulti"],"sources":["../../../src/fields/Select/Input.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type {\n  OptionObject,\n  StaticDescription,\n  StaticLabel,\n} from \"@convexcms/core\";\nimport React from \"react\";\nimport { getTranslation } from \"@convexcms/translations\";\n\nimport type { ReactSelectAdapterProps } from \"../../elements/ReactSelect/types.js\";\nimport { ReactSelect } from \"../../elements/ReactSelect/index.js\";\nimport { RenderCustomComponent } from \"../../elements/RenderCustomComponent/index.js\";\nimport { FieldDescription } from \"../../fields/FieldDescription/index.js\";\nimport { FieldError } from \"../../fields/FieldError/index.js\";\nimport { FieldLabel } from \"../../fields/FieldLabel/index.js\";\nimport { useTranslation } from \"../../providers/Translation/index.js\";\nimport { fieldBaseClass } from \"../shared/index.js\";\n\nexport type SelectInputProps = {\n  readonly AfterInput?: React.ReactNode;\n  readonly BeforeInput?: React.ReactNode;\n  readonly className?: string;\n  readonly Description?: React.ReactNode;\n  readonly description?: StaticDescription;\n  readonly Error?: React.ReactNode;\n  readonly hasMany?: boolean;\n  readonly isClearable?: boolean;\n  readonly isSortable?: boolean;\n  readonly Label?: React.ReactNode;\n  readonly label?: StaticLabel;\n  readonly localized?: boolean;\n  readonly name: string;\n  readonly onChange?: ReactSelectAdapterProps[\"onChange\"];\n  readonly onInputChange?: ReactSelectAdapterProps[\"onInputChange\"];\n  readonly options?: OptionObject[];\n  readonly path: string;\n  readonly readOnly?: boolean;\n  readonly required?: boolean;\n  readonly showError?: boolean;\n  readonly style?: React.CSSProperties;\n  readonly value?: string | string[];\n};\n\nexport const SelectInput: React.FC<SelectInputProps> = (props) => {\n  const {\n    AfterInput,\n    BeforeInput,\n    className,\n    Description,\n    description,\n    Error,\n    hasMany = false,\n    isClearable = true,\n    isSortable = true,\n    label,\n    Label,\n    localized,\n    onChange,\n    onInputChange,\n    options,\n    path,\n    readOnly,\n    required,\n    showError,\n    style,\n    value,\n  } = props;\n\n  const { i18n } = useTranslation();\n\n  let valueToRender;\n\n  if (hasMany && Array.isArray(value)) {\n    valueToRender = value.map((val) => {\n      const matchingOption = options.find((option) => option.value === val);\n      return {\n        label: matchingOption\n          ? getTranslation(matchingOption.label, i18n)\n          : val,\n        value: matchingOption?.value ?? val,\n      };\n    });\n  } else if (value) {\n    const matchingOption = options.find((option) => option.value === value);\n    valueToRender = {\n      label: matchingOption\n        ? getTranslation(matchingOption.label, i18n)\n        : value,\n      value: matchingOption?.value ?? value,\n    };\n  } else {\n    // If value is not present then render nothing, allowing select fields to reset to their initial 'Select an option' state\n    valueToRender = null;\n  }\n\n  return (\n    <div\n      className={[\n        fieldBaseClass,\n        \"select\",\n        className,\n        showError && \"error\",\n        readOnly && \"read-only\",\n      ]\n        .filter(Boolean)\n        .join(\" \")}\n      id={`field-${path.replace(/\\./g, \"__\")}`}\n      style={style}\n    >\n      <RenderCustomComponent\n        CustomComponent={Label}\n        Fallback={\n          <FieldLabel\n            label={label}\n            localized={localized}\n            path={path}\n            required={required}\n          />\n        }\n      />\n      <div className={`${fieldBaseClass}__wrap`}>\n        <RenderCustomComponent\n          CustomComponent={Error}\n          Fallback={<FieldError path={path} showError={showError} />}\n        />\n        {BeforeInput}\n        <ReactSelect\n          disabled={readOnly}\n          isClearable={isClearable}\n          isMulti={hasMany}\n          isSortable={isSortable}\n          onChange={onChange}\n          onInputChange={onInputChange}\n          options={options.map((option) => ({\n            ...option,\n            label: getTranslation(option.label, i18n),\n          }))}\n          showError={showError}\n          value={valueToRender as OptionObject}\n        />\n        {AfterInput}\n      </div>\n      <RenderCustomComponent\n        CustomComponent={Description}\n        Fallback={<FieldDescription description={description} path={path} />}\n      />\n    </div>\n  );\n};\n"],"mappings":"AAAA;;;AAEA,OAAO;AAOP,OAAOA,KAAA,MAAW;AAClB,SAASC,cAAc,QAAQ;AAG/B,SAASC,WAAW,QAAQ;AAC5B,SAASC,qBAAqB,QAAQ;AACtC,SAASC,gBAAgB,QAAQ;AACjC,SAASC,UAAU,QAAQ;AAC3B,SAASC,UAAU,QAAQ;AAC3B,SAASC,cAAc,QAAQ;AAC/B,SAASC,cAAc,QAAQ;AA2B/B,OAAO,MAAMC,WAAA,GAA2CC,KAAA;EACtD,MAAM;IACJC,UAAU;IACVC,WAAW;IACXC,SAAS;IACTC,WAAW;IACXC,WAAW;IACXC,KAAK;IACLC,OAAA,GAAU,KAAK;IACfC,WAAA,GAAc,IAAI;IAClBC,UAAA,GAAa,IAAI;IACjBC,KAAK;IACLC,KAAK;IACLC,SAAS;IACTC,QAAQ;IACRC,aAAa;IACbC,OAAO;IACPC,IAAI;IACJC,QAAQ;IACRC,QAAQ;IACRC,SAAS;IACTC,KAAK;IACLC;EAAK,CACN,GAAGrB,KAAA;EAEJ,MAAM;IAAEsB;EAAI,CAAE,GAAGzB,cAAA;EAEjB,IAAI0B,aAAA;EAEJ,IAAIhB,OAAA,IAAWiB,KAAA,CAAMC,OAAO,CAACJ,KAAA,GAAQ;IACnCE,aAAA,GAAgBF,KAAA,CAAMK,GAAG,CAAEC,GAAA;MACzB,MAAMC,cAAA,GAAiBb,OAAA,CAAQc,IAAI,CAAEC,MAAA,IAAWA,MAAA,CAAOT,KAAK,KAAKM,GAAA;MACjE,OAAO;QACLjB,KAAA,EAAOkB,cAAA,GACHrC,cAAA,CAAeqC,cAAA,CAAelB,KAAK,EAAEY,IAAA,IACrCK,GAAA;QACJN,KAAA,EAAOO,cAAA,EAAgBP,KAAA,IAASM;MAClC;IACF;EACF,OAAO,IAAIN,KAAA,EAAO;IAChB,MAAMO,cAAA,GAAiBb,OAAA,CAAQc,IAAI,CAAEC,MAAA,IAAWA,MAAA,CAAOT,KAAK,KAAKA,KAAA;IACjEE,aAAA,GAAgB;MACdb,KAAA,EAAOkB,cAAA,GACHrC,cAAA,CAAeqC,cAAA,CAAelB,KAAK,EAAEY,IAAA,IACrCD,KAAA;MACJA,KAAA,EAAOO,cAAA,EAAgBP,KAAA,IAASA;IAClC;EACF,OAAO;IACL;IACAE,aAAA,GAAgB;EAClB;EAEA,oBACEQ,KAAA,CAAC;IACC5B,SAAA,EAAW,CACTL,cAAA,EACA,UACAK,SAAA,EACAgB,SAAA,IAAa,SACbF,QAAA,IAAY,YACb,CACEe,MAAM,CAACC,OAAA,EACPC,IAAI,CAAC;IACRC,EAAA,EAAI,SAASnB,IAAA,CAAKoB,OAAO,CAAC,OAAO,OAAO;IACxChB,KAAA,EAAOA,KAAA;4BAEPiB,IAAA,CAAC5C,qBAAA;MACC6C,eAAA,EAAiB3B,KAAA;MACjB4B,QAAA,eACEF,IAAA,CAACzC,UAAA;QACCc,KAAA,EAAOA,KAAA;QACPE,SAAA,EAAWA,SAAA;QACXI,IAAA,EAAMA,IAAA;QACNE,QAAA,EAAUA;;qBAIhBa,KAAA,CAAC;MAAI5B,SAAA,EAAW,GAAGL,cAAA,QAAsB;8BACvCuC,IAAA,CAAC5C,qBAAA;QACC6C,eAAA,EAAiBhC,KAAA;QACjBiC,QAAA,eAAUF,IAAA,CAAC1C,UAAA;UAAWqB,IAAA,EAAMA,IAAA;UAAMG,SAAA,EAAWA;;UAE9CjB,WAAA,E,aACDmC,IAAA,CAAC7C,WAAA;QACCgD,QAAA,EAAUvB,QAAA;QACVT,WAAA,EAAaA,WAAA;QACbiC,OAAA,EAASlC,OAAA;QACTE,UAAA,EAAYA,UAAA;QACZI,QAAA,EAAUA,QAAA;QACVC,aAAA,EAAeA,aAAA;QACfC,OAAA,EAASA,OAAA,CAAQW,GAAG,CAAEI,MAAA,KAAY;UAChC,GAAGA,MAAM;UACTpB,KAAA,EAAOnB,cAAA,CAAeuC,MAAA,CAAOpB,KAAK,EAAEY,IAAA;QACtC;QACAH,SAAA,EAAWA,SAAA;QACXE,KAAA,EAAOE;UAERtB,UAAA;qBAEHoC,IAAA,CAAC5C,qBAAA;MACC6C,eAAA,EAAiBlC,WAAA;MACjBmC,QAAA,eAAUF,IAAA,CAAC3C,gBAAA;QAAiBW,WAAA,EAAaA,WAAA;QAAaW,IAAA,EAAMA;;;;AAIpE","ignoreList":[]}