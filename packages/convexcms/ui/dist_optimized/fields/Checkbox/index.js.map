{"version":3,"file":"index.js","names":["React","useCallback","useMemo","RenderCustomComponent","FieldDescription","FieldError","useForm","useField","withCondition","useEditDepth","generateFieldID","mergeFieldStyles","fieldBaseClass","CheckboxInput","baseClass","CheckboxFieldComponent","props","id","checked","checkedFromProps","disableFormData","field","admin","className","description","label","required","onChange","onChangeFromProps","partialChecked","path","readOnly","validate","uuid","editDepth","memoizedValidate","value","options","customComponents","AfterInput","BeforeInput","Description","Error","Label","disabled","setValue","showError","onToggle","Boolean","fieldID","styles","_jsxs","filter","join","style","_jsx","CustomComponent","Fallback","inputRef","name","CheckboxField"],"sources":["../../../src/fields/Checkbox/index.tsx"],"sourcesContent":["\"use client\";\n\nimport type {\n  CheckboxFieldClientComponent,\n  CheckboxFieldClientProps,\n  CheckboxFieldValidation,\n} from \"@convexcms/core\";\nimport React, { useCallback, useMemo } from \"react\";\n\nimport type { CheckboxInputProps } from \"./Input.js\";\nimport { RenderCustomComponent } from \"../../elements/RenderCustomComponent/index.js\";\nimport { FieldDescription } from \"../../fields/FieldDescription/index.js\";\nimport { FieldError } from \"../../fields/FieldError/index.js\";\nimport { useForm } from \"../../forms/Form/context.js\";\nimport { useField } from \"../../forms/useField/index.js\";\nimport { withCondition } from \"../../forms/withCondition/index.js\";\nimport { useEditDepth } from \"../../providers/EditDepth/index.js\";\nimport { generateFieldID } from \"../../utilities/generateFieldID.js\";\nimport { mergeFieldStyles } from \"../mergeFieldStyles.js\";\nimport { fieldBaseClass } from \"../shared/index.js\";\nimport { CheckboxInput } from \"./Input.js\";\n\nimport \"./index.scss\";\n\nconst baseClass = \"checkbox\";\n\nexport { CheckboxFieldClientProps, CheckboxInput, type CheckboxInputProps };\n\nconst CheckboxFieldComponent: CheckboxFieldClientComponent = (props) => {\n  const {\n    id,\n    checked: checkedFromProps,\n    disableFormData,\n    field,\n    field: {\n      admin: {\n        className,\n        description,\n      } = {} as CheckboxFieldClientProps[\"field\"][\"admin\"],\n      label,\n      required,\n    } = {} as CheckboxFieldClientProps[\"field\"],\n    onChange: onChangeFromProps,\n    partialChecked,\n    path,\n    readOnly,\n    validate,\n  } = props;\n\n  const { uuid } = useForm();\n\n  const editDepth = useEditDepth();\n\n  const memoizedValidate: CheckboxFieldValidation = useCallback(\n    (value, options) => {\n      if (typeof validate === \"function\") {\n        return validate(value, { ...options, required });\n      }\n    },\n    [validate, required],\n  );\n\n  const {\n    customComponents: {\n      AfterInput,\n      BeforeInput,\n      Description,\n      Error,\n      Label,\n    } = {},\n    disabled,\n    setValue,\n    showError,\n    value,\n  } = useField({\n    disableFormData,\n    path,\n    validate: memoizedValidate,\n  });\n\n  const onToggle = useCallback(() => {\n    if (!readOnly) {\n      setValue(!value);\n      if (typeof onChangeFromProps === \"function\") {\n        onChangeFromProps(!value);\n      }\n    }\n  }, [onChangeFromProps, readOnly, setValue, value]);\n\n  const checked = checkedFromProps || Boolean(value);\n\n  const fieldID = id || generateFieldID(path, editDepth, uuid);\n\n  const styles = useMemo(() => mergeFieldStyles(field), [field]);\n\n  return (\n    <div\n      className={[\n        fieldBaseClass,\n        baseClass,\n        showError && \"error\",\n        className,\n        value && `${baseClass}--checked`,\n        (readOnly || disabled) && `${baseClass}--read-only`,\n      ]\n        .filter(Boolean)\n        .join(\" \")}\n      style={styles}\n    >\n      <RenderCustomComponent\n        CustomComponent={Error}\n        Fallback={<FieldError path={path} showError={showError} />}\n      />\n      <CheckboxInput\n        AfterInput={AfterInput}\n        BeforeInput={BeforeInput}\n        checked={checked}\n        id={fieldID}\n        inputRef={null}\n        Label={Label}\n        label={label}\n        name={path}\n        onToggle={onToggle}\n        partialChecked={partialChecked}\n        readOnly={readOnly || disabled}\n        required={required}\n      />\n      <RenderCustomComponent\n        CustomComponent={Description}\n        Fallback={<FieldDescription description={description} path={path} />}\n      />\n    </div>\n  );\n};\n\nexport const CheckboxField = withCondition(CheckboxFieldComponent);\n"],"mappings":"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","ignoreList":[]}