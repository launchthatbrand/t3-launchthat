{"version":3,"file":"index.js","names":["React","useCallback","getTranslation","Banner","Button","DraggableSortableItem","DraggableSortable","ErrorPill","RenderCustomComponent","FieldDescription","FieldError","FieldLabel","useForm","useFormSubmitted","extractRowsAndCollapsedIDs","toggleAllRows","NullifyLocaleField","useField","withCondition","useConfig","useDocumentInfo","useLocale","useTranslation","scrollToID","fieldBaseClass","ArrayRow","baseClass","ArrayFieldComponent","props","field","name","admin","className","description","isSortable","fields","label","localized","maxRows","minRows","minRowsProp","required","forceRender","path","permissions","readOnly","schemaPath","schemaPathFromProps","validate","setDocFieldPreferences","addFieldRow","dispatchFields","moveFieldRow","removeFieldRow","setModified","submitted","code","locale","i18n","t","config","localization","editingDefaultLocale","fallback","defaultLocale","getLabels","p","labels","plural","singular","undefined","memoizedValidate","value","options","customComponents","AfterInput","BeforeInput","Description","Error","Label","disabled","errorPaths","rows","showError","valid","hasRows","addRow","rowIndex","setTimeout","duplicateRow","type","removeRow","moveRow","moveFromIndex","moveToIndex","toggleCollapseAll","collapsed","collapsedIDs","updatedRows","setCollapse","rowID","hasMaxRows","length","fieldErrorCount","fieldHasErrors","showRequired","showMinRows","_jsxs","filter","Boolean","join","id","replace","_jsx","CustomComponent","Fallback","as","count","withMessage","onClick","fieldValue","ids","map","row","onDragEnd","rowData","i","isLoading","rowPath","rowErrorCount","errorPath","startsWith","draggableSortableItemProps","CustomRowLabel","RowLabel","errorCount","parentPath","rowCount","Fragment","buttonStyle","icon","iconPosition","iconStyle","ArrayField"],"sources":["../../../src/fields/Array/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type {\n  ArrayFieldClientComponent,\n  ArrayFieldClientProps,\n  ArrayField as ArrayFieldType,\n} from \"@convexcms/core\";\nimport React, { useCallback } from \"react\";\nimport { getTranslation } from \"@convexcms/translations\";\n\nimport { Banner } from \"../../elements/Banner/index.js\";\nimport { Button } from \"../../elements/Button/index.js\";\nimport { DraggableSortableItem } from \"../../elements/DraggableSortable/DraggableSortableItem/index.js\";\nimport { DraggableSortable } from \"../../elements/DraggableSortable/index.js\";\nimport { ErrorPill } from \"../../elements/ErrorPill/index.js\";\nimport { RenderCustomComponent } from \"../../elements/RenderCustomComponent/index.js\";\nimport { FieldDescription } from \"../../fields/FieldDescription/index.js\";\nimport { FieldError } from \"../../fields/FieldError/index.js\";\nimport { FieldLabel } from \"../../fields/FieldLabel/index.js\";\nimport { useForm, useFormSubmitted } from \"../../forms/Form/context.js\";\nimport {\n  extractRowsAndCollapsedIDs,\n  toggleAllRows,\n} from \"../../forms/Form/rowHelpers.js\";\nimport { NullifyLocaleField } from \"../../forms/NullifyField/index.js\";\nimport { useField } from \"../../forms/useField/index.js\";\nimport { withCondition } from \"../../forms/withCondition/index.js\";\nimport { useConfig } from \"../../providers/Config/index.js\";\nimport { useDocumentInfo } from \"../../providers/DocumentInfo/index.js\";\nimport { useLocale } from \"../../providers/Locale/index.js\";\nimport { useTranslation } from \"../../providers/Translation/index.js\";\nimport { scrollToID } from \"../../utilities/scrollToID.js\";\nimport { fieldBaseClass } from \"../shared/index.js\";\nimport { ArrayRow } from \"./ArrayRow.js\";\n\nconst baseClass = \"array-field\";\n\nexport const ArrayFieldComponent: ArrayFieldClientComponent = (props) => {\n  const {\n    field: {\n      name,\n      admin: { className, description, isSortable = true } = {},\n      fields,\n      label,\n      localized,\n      maxRows,\n      minRows: minRowsProp,\n      required,\n    },\n    forceRender = false,\n    path,\n    permissions,\n    readOnly,\n    schemaPath: schemaPathFromProps,\n    validate,\n  } = props;\n\n  const schemaPath = schemaPathFromProps ?? name;\n\n  const minRows = (minRowsProp ?? required) ? 1 : 0;\n\n  const { setDocFieldPreferences } = useDocumentInfo();\n  const {\n    addFieldRow,\n    dispatchFields,\n    moveFieldRow,\n    removeFieldRow,\n    setModified,\n  } = useForm();\n  const submitted = useFormSubmitted();\n  const { code: locale } = useLocale();\n  const { i18n, t } = useTranslation();\n\n  const {\n    config: { localization },\n  } = useConfig();\n\n  const editingDefaultLocale = (() => {\n    if (localization && localization.fallback) {\n      const defaultLocale = localization.defaultLocale;\n      return locale === defaultLocale;\n    }\n\n    return true;\n  })();\n\n  // Handle labeling for Arrays, Global Arrays, and Blocks\n  const getLabels = (\n    p: ArrayFieldClientProps,\n  ): Partial<ArrayFieldType[\"labels\"]> => {\n    if (\"labels\" in p && p?.labels) {\n      return p.labels;\n    }\n\n    if (\"labels\" in p.field && p.field.labels) {\n      return {\n        plural: p.field.labels?.plural,\n        singular: p.field.labels?.singular,\n      };\n    }\n\n    if (\"label\" in p.field && p.field.label) {\n      return { plural: undefined, singular: p.field.label };\n    }\n\n    return { plural: t(\"general:rows\"), singular: t(\"general:row\") };\n  };\n\n  const labels = getLabels(props);\n\n  const memoizedValidate = useCallback(\n    (value, options) => {\n      // alternative locales can be null\n      if (!editingDefaultLocale && value === null) {\n        return true;\n      }\n\n      if (typeof validate === \"function\") {\n        return validate(value, { ...options, maxRows, minRows, required });\n      }\n    },\n    [maxRows, minRows, required, validate, editingDefaultLocale],\n  );\n\n  const {\n    customComponents: {\n      AfterInput,\n      BeforeInput,\n      Description,\n      Error,\n      Label,\n    } = {},\n    disabled,\n    errorPaths,\n    rows = [],\n    showError,\n    valid,\n    value,\n  } = useField<number>({\n    hasRows: true,\n    path,\n    validate: memoizedValidate,\n  });\n\n  const addRow = useCallback(\n    (rowIndex: number) => {\n      addFieldRow({\n        path,\n        rowIndex,\n        schemaPath,\n      });\n\n      setTimeout(() => {\n        scrollToID(`${path}-row-${rowIndex}`);\n      }, 0);\n    },\n    [addFieldRow, path, schemaPath],\n  );\n\n  const duplicateRow = useCallback(\n    (rowIndex: number) => {\n      dispatchFields({ type: \"DUPLICATE_ROW\", path, rowIndex });\n\n      setModified(true);\n\n      setTimeout(() => {\n        scrollToID(`${path}-row-${rowIndex}`);\n      }, 0);\n    },\n    [dispatchFields, path, setModified],\n  );\n\n  const removeRow = useCallback(\n    (rowIndex: number) => {\n      removeFieldRow({ path, rowIndex });\n    },\n    [removeFieldRow, path],\n  );\n\n  const moveRow = useCallback(\n    (moveFromIndex: number, moveToIndex: number) => {\n      moveFieldRow({\n        moveFromIndex,\n        moveToIndex,\n        path,\n      });\n    },\n    [path, moveFieldRow],\n  );\n\n  const toggleCollapseAll = useCallback(\n    (collapsed: boolean) => {\n      const { collapsedIDs, updatedRows } = toggleAllRows({\n        collapsed,\n        rows,\n      });\n      setDocFieldPreferences(path, { collapsed: collapsedIDs });\n      dispatchFields({ type: \"SET_ALL_ROWS_COLLAPSED\", path, updatedRows });\n    },\n    [dispatchFields, path, rows, setDocFieldPreferences],\n  );\n\n  const setCollapse = useCallback(\n    (rowID: string, collapsed: boolean) => {\n      const { collapsedIDs, updatedRows } = extractRowsAndCollapsedIDs({\n        collapsed,\n        rowID,\n        rows,\n      });\n\n      dispatchFields({ type: \"SET_ROW_COLLAPSED\", path, updatedRows });\n      setDocFieldPreferences(path, { collapsed: collapsedIDs });\n    },\n    [dispatchFields, path, rows, setDocFieldPreferences],\n  );\n\n  const hasMaxRows = maxRows && rows.length >= maxRows;\n\n  const fieldErrorCount = errorPaths.length;\n  const fieldHasErrors = submitted && errorPaths.length > 0;\n\n  const showRequired = (readOnly || disabled) && rows.length === 0;\n  const showMinRows = rows.length < minRows || (required && rows.length === 0);\n\n  return (\n    <div\n      className={[\n        fieldBaseClass,\n        baseClass,\n        className,\n        fieldHasErrors\n          ? `${baseClass}--has-error`\n          : `${baseClass}--has-no-error`,\n      ]\n        .filter(Boolean)\n        .join(\" \")}\n      id={`field-${path.replace(/\\./g, \"__\")}`}\n    >\n      {showError && (\n        <RenderCustomComponent\n          CustomComponent={Error}\n          Fallback={<FieldError path={path} showError={showError} />}\n        />\n      )}\n      <header className={`${baseClass}__header`}>\n        <div className={`${baseClass}__header-wrap`}>\n          <div className={`${baseClass}__header-content`}>\n            <h3 className={`${baseClass}__title`}>\n              <RenderCustomComponent\n                CustomComponent={Label}\n                Fallback={\n                  <FieldLabel\n                    as=\"span\"\n                    label={label}\n                    localized={localized}\n                    path={path}\n                    required={required}\n                  />\n                }\n              />\n            </h3>\n            {fieldHasErrors && fieldErrorCount > 0 && (\n              <ErrorPill count={fieldErrorCount} i18n={i18n} withMessage />\n            )}\n          </div>\n          {rows?.length > 0 && (\n            <ul className={`${baseClass}__header-actions`}>\n              <li>\n                <button\n                  className={`${baseClass}__header-action`}\n                  onClick={() => toggleCollapseAll(true)}\n                  type=\"button\"\n                >\n                  {t(\"fields:collapseAll\")}\n                </button>\n              </li>\n              <li>\n                <button\n                  className={`${baseClass}__header-action`}\n                  onClick={() => toggleCollapseAll(false)}\n                  type=\"button\"\n                >\n                  {t(\"fields:showAll\")}\n                </button>\n              </li>\n            </ul>\n          )}\n        </div>\n        <RenderCustomComponent\n          CustomComponent={Description}\n          Fallback={<FieldDescription description={description} path={path} />}\n        />\n      </header>\n      <NullifyLocaleField\n        fieldValue={value}\n        localized={localized}\n        path={path}\n      />\n      {BeforeInput}\n      {(rows?.length > 0 || (!valid && (showRequired || showMinRows))) && (\n        <DraggableSortable\n          className={`${baseClass}__draggable-rows`}\n          ids={rows.map((row) => row.id)}\n          onDragEnd={({ moveFromIndex, moveToIndex }) =>\n            moveRow(moveFromIndex, moveToIndex)\n          }\n        >\n          {rows.map((rowData, i) => {\n            const { id: rowID, isLoading } = rowData;\n\n            const rowPath = `${path}.${i}`;\n\n            const rowErrorCount = errorPaths?.filter((errorPath) =>\n              errorPath.startsWith(rowPath + \".\"),\n            ).length;\n\n            return (\n              <DraggableSortableItem\n                disabled={readOnly || disabled || !isSortable}\n                id={rowID}\n                key={rowID}\n              >\n                {(draggableSortableItemProps) => (\n                  <ArrayRow\n                    {...draggableSortableItemProps}\n                    addRow={addRow}\n                    CustomRowLabel={rows?.[i]?.customComponents?.RowLabel}\n                    duplicateRow={duplicateRow}\n                    errorCount={rowErrorCount}\n                    fields={fields}\n                    forceRender={forceRender}\n                    hasMaxRows={hasMaxRows}\n                    isLoading={isLoading}\n                    isSortable={isSortable}\n                    labels={labels}\n                    moveRow={moveRow}\n                    parentPath={path}\n                    path={rowPath}\n                    permissions={permissions}\n                    readOnly={readOnly || disabled}\n                    removeRow={removeRow}\n                    row={rowData}\n                    rowCount={rows?.length}\n                    rowIndex={i}\n                    schemaPath={schemaPath}\n                    setCollapse={setCollapse}\n                  />\n                )}\n              </DraggableSortableItem>\n            );\n          })}\n          {!valid && (\n            <React.Fragment>\n              {showRequired && (\n                <Banner>\n                  {t(\"validation:fieldHasNo\", {\n                    label: getTranslation(labels.plural, i18n),\n                  })}\n                </Banner>\n              )}\n              {showMinRows && (\n                <Banner type=\"error\">\n                  {t(\"validation:requiresAtLeast\", {\n                    count: minRows,\n                    label:\n                      getTranslation(\n                        minRows > 1 ? labels.plural : labels.singular,\n                        i18n,\n                      ) || t(minRows > 1 ? \"general:rows\" : \"general:row\"),\n                  })}\n                </Banner>\n              )}\n            </React.Fragment>\n          )}\n        </DraggableSortable>\n      )}\n      {!hasMaxRows && !readOnly && (\n        <Button\n          buttonStyle=\"icon-label\"\n          className={`${baseClass}__add-row`}\n          icon=\"plus\"\n          iconPosition=\"left\"\n          iconStyle=\"with-border\"\n          onClick={() => {\n            void addRow(value || 0);\n          }}\n        >\n          {t(\"fields:addLabel\", {\n            label: getTranslation(labels.singular, i18n),\n          })}\n        </Button>\n      )}\n      {AfterInput}\n    </div>\n  );\n};\n\nexport const ArrayField = withCondition(ArrayFieldComponent);\n"],"mappings":"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","ignoreList":[]}