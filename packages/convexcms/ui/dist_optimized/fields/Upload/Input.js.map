{"version":3,"file":"Input.js","names":["React","useCallback","useEffect","useMemo","useModal","qs","useBulkUpload","Button","useDocumentDrawer","Dropzone","useListDrawer","RenderCustomComponent","ShimmerEffect","FieldDescription","FieldError","FieldLabel","useAuth","useLocale","useTranslation","fieldBaseClass","UploadComponentHasMany","UploadComponentHasOne","baseClass","UploadInput","props","AfterInput","allowCreate","api","BeforeInput","className","Description","description","displayPreview","Error","filterOptions","filterOptionsFromProps","hasMany","isSortable","Label","label","localized","maxRows","onChange","onChangeFromProps","path","readOnly","relationTo","required","serverURL","showError","style","value","populatedDocs","setPopulatedDocs","useState","activeRelationTo","setActiveRelationTo","Array","isArray","openModal","drawerSlug","setCollectionSlug","setCurrentActivePath","setInitialFiles","setMaxFiles","setOnSuccess","permissions","code","i18n","t","id","not_in","concat","ListDrawer","closeDrawer","closeListDrawer","openDrawer","openListDrawer","collectionSlugs","CreateDocDrawer","closeCreateDocDrawer","openCreateDocDrawer","collectionSlug","loadedValueDocsRef","useRef","canCreate","collections","create","newValue","populateDocs","ids","relatedCollectionSlug","length","query","depth","draft","limit","locale","where","and","in","response","fetch","body","stringify","credentials","headers","language","method","ok","json","sortedDocs","map","docs","find","doc","String","includes","undefined","index","filename","isPlaceholder","onUploadSuccess","newDocs","mergedValue","currentDocs","firstDoc","onLocalFileSelection","fileList","fileListToUse","dataTransfer","DataTransfer","items","add","files","onListBulkSelect","selectedDocIDs","isSelected","push","loadedDocs","onDocCreate","data","onListSelect","selectedDoc","reloadDoc","docID","updatedDocsToPropogate","existingDocIndex","findIndex","hasExisting","updatedDocs","onReorder","newValueIDs","onRemove","loadInitialDocs","current","showDropzone","_jsxs","filter","Boolean","join","replace","_jsx","CustomComponent","Fallback","_Fragment","fileDocs","readonly","height","fileDoc","disabled","multipleFiles","buttonStyle","onClick","size","onSave","enableRowSelections","onBulkSelect","onSelect"],"sources":["../../../src/fields/Upload/Input.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type {\n  ClientCollectionConfig,\n  FieldLabelClientProps,\n  FilterOptionsResult,\n  JsonObject,\n  StaticDescription,\n  StaticLabel,\n  UploadFieldClient,\n  UploadField as UploadFieldType,\n  Where,\n} from \"@convexcms/core\";\nimport type { MarkOptional } from \"ts-essentials\";\nimport React, { useCallback, useEffect, useMemo } from \"react\";\nimport { useModal } from \"@faceless-ui/modal\";\nimport * as qs from \"qs-esm\";\n\nimport type { ListDrawerProps } from \"../../elements/ListDrawer/types.js\";\nimport type { PopulateDocs, ReloadDoc } from \"./types.js\";\nimport { useBulkUpload } from \"../../elements/BulkUpload/index.js\";\nimport { Button } from \"../../elements/Button/index.js\";\nimport { useDocumentDrawer } from \"../../elements/DocumentDrawer/index.js\";\nimport { Dropzone } from \"../../elements/Dropzone/index.js\";\nimport { useListDrawer } from \"../../elements/ListDrawer/index.js\";\nimport { RenderCustomComponent } from \"../../elements/RenderCustomComponent/index.js\";\nimport { ShimmerEffect } from \"../../elements/ShimmerEffect/index.js\";\nimport { FieldDescription } from \"../../fields/FieldDescription/index.js\";\nimport { FieldError } from \"../../fields/FieldError/index.js\";\nimport { FieldLabel } from \"../../fields/FieldLabel/index.js\";\nimport { useAuth } from \"../../providers/Auth/index.js\";\nimport { useLocale } from \"../../providers/Locale/index.js\";\nimport { useTranslation } from \"../../providers/Translation/index.js\";\nimport { fieldBaseClass } from \"../shared/index.js\";\nimport { UploadComponentHasMany } from \"./HasMany/index.js\";\nimport { UploadComponentHasOne } from \"./HasOne/index.js\";\n\nexport const baseClass = \"upload\";\n\ntype PopulatedDocs = { relationTo: string; value: JsonObject }[];\n\nexport type UploadInputProps = {\n  readonly AfterInput?: React.ReactNode;\n  readonly allowCreate?: boolean;\n  /**\n   * Controls the visibility of the \"Create new collection\" button\n   */\n  readonly api?: string;\n  readonly BeforeInput?: React.ReactNode;\n  readonly className?: string;\n  readonly collection?: ClientCollectionConfig;\n  readonly customUploadActions?: React.ReactNode[];\n  readonly Description?: React.ReactNode;\n  readonly description?: StaticDescription;\n  readonly displayPreview?: boolean;\n  readonly Error?: React.ReactNode;\n  readonly filterOptions?: FilterOptionsResult;\n  readonly hasMany?: boolean;\n  readonly hideRemoveFile?: boolean;\n  readonly isSortable?: boolean;\n  readonly Label?: React.ReactNode;\n  readonly label?: StaticLabel;\n  readonly labelProps?: FieldLabelClientProps<\n    MarkOptional<UploadFieldClient, \"type\">\n  >;\n  readonly localized?: boolean;\n  readonly maxRows?: number;\n  readonly onChange?: (e) => void;\n  readonly path: string;\n  readonly readOnly?: boolean;\n  readonly relationTo: UploadFieldType[\"relationTo\"];\n  readonly required?: boolean;\n  readonly serverURL?: string;\n  readonly showError?: boolean;\n  readonly style?: React.CSSProperties;\n  readonly value?: (number | string)[] | (number | string);\n};\n\nexport function UploadInput(props: UploadInputProps) {\n  const {\n    AfterInput,\n    allowCreate,\n    api,\n    BeforeInput,\n    className,\n    Description,\n    description,\n    displayPreview,\n    Error,\n    filterOptions: filterOptionsFromProps,\n    hasMany,\n    isSortable,\n    Label,\n    label,\n    localized,\n    maxRows,\n    onChange: onChangeFromProps,\n    path,\n    readOnly,\n    relationTo,\n    required,\n    serverURL,\n    showError,\n    style,\n    value,\n  } = props;\n\n  const [populatedDocs, setPopulatedDocs] = React.useState<\n    {\n      relationTo: string;\n      value: JsonObject;\n    }[]\n  >();\n\n  const [activeRelationTo, setActiveRelationTo] = React.useState<string>(\n    Array.isArray(relationTo) ? relationTo[0] : relationTo,\n  );\n\n  const { openModal } = useModal();\n  const {\n    drawerSlug,\n    setCollectionSlug,\n    setCurrentActivePath,\n    setInitialFiles,\n    setMaxFiles,\n    setOnSuccess,\n  } = useBulkUpload();\n  const { permissions } = useAuth();\n  const { code } = useLocale();\n  const { i18n, t } = useTranslation();\n\n  const filterOptions: FilterOptionsResult = useMemo(() => {\n    return {\n      ...filterOptionsFromProps,\n      [activeRelationTo]: {\n        ...((filterOptionsFromProps?.[activeRelationTo] as any) || {}),\n        id: {\n          ...((filterOptionsFromProps?.[activeRelationTo] as any)?.id || {}),\n          not_in: (\n            (filterOptionsFromProps?.[activeRelationTo] as any)?.id?.not_in ||\n            []\n          ).concat(...(Array.isArray(value) || value ? [value] : [])),\n        },\n      },\n    };\n  }, [value, activeRelationTo, filterOptionsFromProps]);\n\n  const [\n    ListDrawer,\n    ,\n    { closeDrawer: closeListDrawer, openDrawer: openListDrawer },\n  ] = useListDrawer({\n    collectionSlugs: typeof relationTo === \"string\" ? [relationTo] : relationTo,\n    filterOptions,\n  });\n\n  const [\n    CreateDocDrawer,\n    ,\n    { closeDrawer: closeCreateDocDrawer, openDrawer: openCreateDocDrawer },\n  ] = useDocumentDrawer({\n    collectionSlug: activeRelationTo,\n  });\n\n  /**\n   * Prevent initial retrieval of documents from running more than once\n   */\n  const loadedValueDocsRef = React.useRef<boolean>(false);\n\n  const canCreate = useMemo(() => {\n    if (!allowCreate) {\n      return false;\n    }\n\n    if (typeof activeRelationTo === \"string\") {\n      if (\n        permissions?.collections &&\n        permissions.collections?.[activeRelationTo]?.create\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  }, [activeRelationTo, permissions, allowCreate]);\n\n  const onChange = React.useCallback(\n    (newValue) => {\n      if (typeof onChangeFromProps === \"function\") {\n        onChangeFromProps(newValue);\n      }\n    },\n    [onChangeFromProps],\n  );\n\n  const populateDocs = React.useCallback<PopulateDocs>(\n    async (ids, relatedCollectionSlug) => {\n      if (!ids.length) {\n        return;\n      }\n\n      const query: {\n        [key: string]: unknown;\n        where: Where;\n      } = {\n        depth: 0,\n        draft: true,\n        limit: ids.length,\n        locale: code,\n        where: {\n          and: [\n            {\n              id: {\n                in: ids,\n              },\n            },\n          ],\n        },\n      };\n\n      const response = await fetch(\n        `${serverURL}${api}/${relatedCollectionSlug}`,\n        {\n          body: qs.stringify(query),\n          credentials: \"include\",\n          headers: {\n            \"Accept-Language\": i18n.language,\n            \"Content-Type\": \"application/x-www-form-urlencoded\",\n            \"X-HTTP-Method-Override\": \"GET\",\n          },\n          method: \"POST\",\n        },\n      );\n      if (response.ok) {\n        const json = await response.json();\n        let sortedDocs = ids.map((id) =>\n          json.docs.find((doc) => {\n            return String(doc.id) === String(id);\n          }),\n        );\n\n        if (sortedDocs.includes(undefined) && hasMany) {\n          sortedDocs = sortedDocs.map((doc, index) =>\n            doc\n              ? doc\n              : {\n                  id: ids[index],\n                  filename: `${t(\"general:untitled\")} - ID: ${ids[index]}`,\n                  isPlaceholder: true,\n                },\n          );\n        }\n\n        return { ...json, docs: sortedDocs };\n      }\n\n      return null;\n    },\n    [code, serverURL, api, i18n.language, t, hasMany],\n  );\n\n  const onUploadSuccess = useCallback(\n    (newDocs: JsonObject[]) => {\n      if (hasMany) {\n        const mergedValue = [\n          ...(Array.isArray(value) ? value : []),\n          ...newDocs.map((doc) => doc.id),\n        ];\n        onChange(mergedValue);\n        setPopulatedDocs((currentDocs) => [\n          ...(currentDocs || []),\n          ...newDocs.map((doc) => ({\n            relationTo: activeRelationTo,\n            value: doc,\n          })),\n        ]);\n      } else {\n        const firstDoc = newDocs[0];\n        onChange(firstDoc.id);\n        setPopulatedDocs([\n          {\n            relationTo: activeRelationTo,\n            value: firstDoc,\n          },\n        ]);\n      }\n    },\n    [value, onChange, activeRelationTo, hasMany],\n  );\n\n  const onLocalFileSelection = React.useCallback(\n    (fileList?: FileList) => {\n      let fileListToUse = fileList;\n      if (!hasMany && fileList && fileList.length > 1) {\n        const dataTransfer = new DataTransfer();\n        dataTransfer.items.add(fileList[0]);\n        fileListToUse = dataTransfer.files;\n      }\n      if (fileListToUse) {\n        setInitialFiles(fileListToUse);\n      }\n      setCollectionSlug(relationTo);\n      if (typeof maxRows === \"number\") {\n        setMaxFiles(maxRows);\n      }\n      setCurrentActivePath(path);\n      openModal(drawerSlug);\n    },\n    [\n      drawerSlug,\n      hasMany,\n      openModal,\n      relationTo,\n      setCollectionSlug,\n      setInitialFiles,\n      maxRows,\n      setMaxFiles,\n      path,\n      setCurrentActivePath,\n    ],\n  );\n\n  // only hasMany can bulk select\n  const onListBulkSelect = React.useCallback<\n    NonNullable<ListDrawerProps[\"onBulkSelect\"]>\n  >(\n    async (docs) => {\n      const selectedDocIDs = [];\n\n      for (const [id, isSelected] of docs) {\n        if (isSelected) {\n          selectedDocIDs.push(id);\n        }\n      }\n\n      const loadedDocs = await populateDocs(selectedDocIDs, activeRelationTo);\n      if (loadedDocs) {\n        setPopulatedDocs((currentDocs) => [\n          ...(currentDocs || []),\n          ...loadedDocs.docs.map((doc) => ({\n            relationTo: activeRelationTo,\n            value: doc,\n          })),\n        ]);\n      }\n      onChange([...(Array.isArray(value) ? value : []), ...selectedDocIDs]);\n      closeListDrawer();\n    },\n    [activeRelationTo, closeListDrawer, onChange, populateDocs, value],\n  );\n\n  const onDocCreate = React.useCallback(\n    (data) => {\n      if (data.doc) {\n        setPopulatedDocs((currentDocs) => [\n          ...(currentDocs || []),\n          {\n            relationTo: activeRelationTo,\n            value: data.doc,\n          },\n        ]);\n\n        onChange(data.doc.id);\n      }\n      closeCreateDocDrawer();\n    },\n    [closeCreateDocDrawer, activeRelationTo, onChange],\n  );\n\n  const onListSelect = useCallback<NonNullable<ListDrawerProps[\"onSelect\"]>>(\n    async ({ collectionSlug, doc }) => {\n      const loadedDocs = await populateDocs([doc.id], collectionSlug);\n      const selectedDoc = loadedDocs ? loadedDocs.docs?.[0] : null;\n      setPopulatedDocs((currentDocs) => {\n        if (selectedDoc) {\n          if (hasMany) {\n            return [\n              ...(currentDocs || []),\n              {\n                relationTo: activeRelationTo,\n                value: selectedDoc,\n              },\n            ];\n          }\n          return [\n            {\n              relationTo: activeRelationTo,\n              value: selectedDoc,\n            },\n          ];\n        }\n        return currentDocs;\n      });\n      if (hasMany) {\n        onChange([...(Array.isArray(value) ? value : []), doc.id]);\n      } else {\n        onChange(doc.id);\n      }\n      closeListDrawer();\n    },\n    [closeListDrawer, hasMany, populateDocs, onChange, value, activeRelationTo],\n  );\n\n  const reloadDoc = React.useCallback<ReloadDoc>(\n    async (docID, collectionSlug) => {\n      const { docs } = await populateDocs([docID], collectionSlug);\n\n      if (docs[0]) {\n        let updatedDocsToPropogate = [];\n        setPopulatedDocs((currentDocs) => {\n          const existingDocIndex = currentDocs?.findIndex((doc) => {\n            const hasExisting =\n              doc.value?.id === docs[0].id || doc.value?.isPlaceholder;\n            return hasExisting && doc.relationTo === collectionSlug;\n          });\n          if (existingDocIndex > -1) {\n            const updatedDocs = [...currentDocs];\n            updatedDocs[existingDocIndex] = {\n              relationTo: collectionSlug,\n              value: docs[0],\n            };\n            updatedDocsToPropogate = updatedDocs;\n            return updatedDocs;\n          }\n        });\n\n        if (updatedDocsToPropogate.length && hasMany) {\n          onChange(updatedDocsToPropogate.map((doc) => doc.value?.id));\n        }\n      }\n    },\n    [populateDocs, onChange, hasMany],\n  );\n\n  // only hasMany can reorder\n  const onReorder = React.useCallback(\n    (newValue) => {\n      const newValueIDs = newValue.map(({ value }) => value.id);\n      onChange(newValueIDs);\n      setPopulatedDocs(newValue);\n    },\n    [onChange],\n  );\n\n  const onRemove = React.useCallback(\n    (newValue?: PopulatedDocs) => {\n      const newValueIDs = newValue\n        ? newValue.map(({ value }) => value.id)\n        : null;\n      onChange(hasMany ? newValueIDs : newValueIDs ? newValueIDs[0] : null);\n      setPopulatedDocs(newValue ? newValue : []);\n    },\n    [onChange, hasMany],\n  );\n\n  useEffect(() => {\n    async function loadInitialDocs() {\n      if (value) {\n        loadedValueDocsRef.current = true;\n        const loadedDocs = await populateDocs(\n          Array.isArray(value) ? value : [value],\n          activeRelationTo,\n        );\n        if (loadedDocs) {\n          setPopulatedDocs(\n            loadedDocs.docs.map((doc) => ({\n              relationTo: activeRelationTo,\n              value: doc,\n            })),\n          );\n        }\n      }\n    }\n\n    if (!loadedValueDocsRef.current) {\n      void loadInitialDocs();\n    }\n  }, [populateDocs, activeRelationTo, value]);\n\n  useEffect(() => {\n    setOnSuccess(path, onUploadSuccess);\n  }, [value, path, onUploadSuccess, setOnSuccess]);\n\n  const showDropzone =\n    !value ||\n    (hasMany &&\n      Array.isArray(value) &&\n      (typeof maxRows !== \"number\" || value.length < maxRows)) ||\n    (!hasMany &&\n      populatedDocs?.[0] &&\n      typeof populatedDocs[0].value === \"undefined\");\n\n  return (\n    <div\n      className={[\n        fieldBaseClass,\n        baseClass,\n        className,\n        showError && \"error\",\n        readOnly && \"read-only\",\n      ]\n        .filter(Boolean)\n        .join(\" \")}\n      id={`field-${path?.replace(/\\./g, \"__\")}`}\n      style={style}\n    >\n      <RenderCustomComponent\n        CustomComponent={Label}\n        Fallback={\n          <FieldLabel\n            label={label}\n            localized={localized}\n            path={path}\n            required={required}\n          />\n        }\n      />\n      <div className={`${baseClass}__wrap`}>\n        <RenderCustomComponent\n          CustomComponent={Error}\n          Fallback={<FieldError path={path} showError={showError} />}\n        />\n      </div>\n      {BeforeInput}\n      <div className={`${baseClass}__dropzoneAndUpload`}>\n        {hasMany && Array.isArray(value) && value.length > 0 ? (\n          <>\n            {populatedDocs && populatedDocs?.length > 0 ? (\n              <UploadComponentHasMany\n                displayPreview={displayPreview}\n                fileDocs={populatedDocs}\n                isSortable={isSortable && !readOnly}\n                onRemove={onRemove}\n                onReorder={onReorder}\n                readonly={readOnly}\n                reloadDoc={reloadDoc}\n                serverURL={serverURL}\n              />\n            ) : (\n              <div className={`${baseClass}__loadingRows`}>\n                {value.map((id) => (\n                  <ShimmerEffect height=\"40px\" key={id} />\n                ))}\n              </div>\n            )}\n          </>\n        ) : null}\n        {!hasMany && value ? (\n          <>\n            {populatedDocs &&\n            populatedDocs?.length > 0 &&\n            populatedDocs[0].value ? (\n              <UploadComponentHasOne\n                displayPreview={displayPreview}\n                fileDoc={populatedDocs[0]}\n                onRemove={onRemove}\n                readonly={readOnly}\n                reloadDoc={reloadDoc}\n                serverURL={serverURL}\n              />\n            ) : populatedDocs && value && !populatedDocs?.[0]?.value ? (\n              <>\n                {t(\"general:untitled\")} - ID: {value}\n              </>\n            ) : (\n              <ShimmerEffect height=\"62px\" />\n            )}\n          </>\n        ) : null}\n        {showDropzone ? (\n          <Dropzone\n            disabled={readOnly || !canCreate}\n            multipleFiles={hasMany}\n            onChange={onLocalFileSelection}\n          >\n            <div className={`${baseClass}__dropzoneContent`}>\n              <div className={`${baseClass}__dropzoneContent__buttons`}>\n                {canCreate && (\n                  <>\n                    <Button\n                      buttonStyle=\"pill\"\n                      className={`${baseClass}__createNewToggler`}\n                      disabled={readOnly || !canCreate}\n                      onClick={() => {\n                        if (!readOnly) {\n                          if (hasMany) {\n                            onLocalFileSelection();\n                          } else {\n                            openCreateDocDrawer();\n                          }\n                        }\n                      }}\n                      size=\"small\"\n                    >\n                      {t(\"general:createNew\")}\n                    </Button>\n                    <span className={`${baseClass}__dropzoneContent__orText`}>\n                      {t(\"general:or\")}\n                    </span>\n                  </>\n                )}\n                <Button\n                  buttonStyle=\"pill\"\n                  className={`${baseClass}__listToggler`}\n                  disabled={readOnly}\n                  onClick={openListDrawer}\n                  size=\"small\"\n                >\n                  {t(\"fields:chooseFromExisting\")}\n                </Button>\n                <CreateDocDrawer onSave={onDocCreate} />\n                <ListDrawer\n                  allowCreate={canCreate}\n                  enableRowSelections={hasMany}\n                  onBulkSelect={onListBulkSelect}\n                  onSelect={onListSelect}\n                />\n              </div>\n\n              {canCreate && !readOnly && (\n                <p className={`${baseClass}__dragAndDropText`}>\n                  {t(\"general:or\")} {t(\"upload:dragAndDrop\")}\n                </p>\n              )}\n            </div>\n          </Dropzone>\n        ) : (\n          <>\n            {!readOnly &&\n            !populatedDocs &&\n            (!value ||\n              typeof maxRows !== \"number\" ||\n              (Array.isArray(value) && value.length < maxRows)) ? (\n              <ShimmerEffect height=\"40px\" />\n            ) : null}\n          </>\n        )}\n      </div>\n      {AfterInput}\n      <RenderCustomComponent\n        CustomComponent={Description}\n        Fallback={<FieldDescription description={description} path={path} />}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]}