{"version":3,"file":"index.js","names":["React","useState","tabHasName","getTranslation","ErrorPill","WatchChildErrors","useTranslation","baseClass","TabComponent","hidden","isActive","parentPath","setIsActive","tab","i18n","errorCount","setErrorCount","undefined","path","split","slice","name","fieldHasErrors","_jsxs","Fragment","_jsx","fields","className","filter","Boolean","join","onClick","type","label","count"],"sources":["../../../../src/fields/Tabs/Tab/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type { ClientTab } from \"@convexcms/core\";\nimport React, { useState } from \"react\";\nimport { tabHasName } from \"@convexcms/core/shared\";\nimport { getTranslation } from \"@convexcms/translations\";\n\nimport { ErrorPill } from \"../../../elements/ErrorPill/index.js\";\nimport { WatchChildErrors } from \"../../../forms/WatchChildErrors/index.js\";\nimport { useTranslation } from \"../../../providers/Translation/index.js\";\n\nconst baseClass = \"tabs-field__tab-button\";\n\ntype TabProps = {\n  readonly hidden?: boolean;\n  readonly isActive?: boolean;\n  readonly parentPath: string;\n  readonly setIsActive: () => void;\n  readonly tab: ClientTab;\n};\n\nexport const TabComponent: React.FC<TabProps> = ({\n  hidden,\n  isActive,\n  parentPath,\n  setIsActive,\n  tab,\n}) => {\n  const { i18n } = useTranslation();\n  const [errorCount, setErrorCount] = useState(undefined);\n\n  const path = [\n    // removes parent 'tabs' path segment, i.e. `_index-0`\n    ...(parentPath ? parentPath.split(\".\").slice(0, -1) : []),\n    ...(tabHasName(tab) ? [tab.name] : []),\n  ];\n\n  const fieldHasErrors = errorCount > 0;\n\n  return (\n    <React.Fragment>\n      <WatchChildErrors\n        fields={tab.fields}\n        path={path}\n        setErrorCount={setErrorCount}\n      />\n      <button\n        className={[\n          baseClass,\n          fieldHasErrors && `${baseClass}--has-error`,\n          isActive && `${baseClass}--active`,\n          hidden && `${baseClass}--hidden`,\n        ]\n          .filter(Boolean)\n          .join(\" \")}\n        onClick={setIsActive}\n        type=\"button\"\n      >\n        {tab.label\n          ? getTranslation(tab.label, i18n)\n          : tabHasName(tab)\n            ? tab.name\n            : \"\"}\n        {fieldHasErrors && <ErrorPill count={errorCount} i18n={i18n} />}\n      </button>\n    </React.Fragment>\n  );\n};\n"],"mappings":"AAAA;;;AAEA,OAAO;AAGP,OAAOA,KAAA,IAASC,QAAQ,QAAQ;AAChC,SAASC,UAAU,QAAQ;AAC3B,SAASC,cAAc,QAAQ;AAE/B,SAASC,SAAS,QAAQ;AAC1B,SAASC,gBAAgB,QAAQ;AACjC,SAASC,cAAc,QAAQ;AAE/B,MAAMC,SAAA,GAAY;AAUlB,OAAO,MAAMC,YAAA,GAAmCA,CAAC;EAC/CC,MAAM;EACNC,QAAQ;EACRC,UAAU;EACVC,WAAW;EACXC;AAAG,CACJ;EACC,MAAM;IAAEC;EAAI,CAAE,GAAGR,cAAA;EACjB,MAAM,CAACS,UAAA,EAAYC,aAAA,CAAc,GAAGf,QAAA,CAASgB,SAAA;EAE7C,MAAMC,IAAA,GAAO;EACX;MACIP,UAAA,GAAaA,UAAA,CAAWQ,KAAK,CAAC,KAAKC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,G,IACpDlB,UAAA,CAAWW,GAAA,IAAO,CAACA,GAAA,CAAIQ,IAAI,CAAC,GAAG,EAAE,EACtC;EAED,MAAMC,cAAA,GAAiBP,UAAA,GAAa;EAEpC,oBACEQ,KAAA,CAACvB,KAAA,CAAMwB,QAAQ;4BACbC,IAAA,CAACpB,gBAAA;MACCqB,MAAA,EAAQb,GAAA,CAAIa,MAAM;MAClBR,IAAA,EAAMA,IAAA;MACNF,aAAA,EAAeA;qBAEjBO,KAAA,CAAC;MACCI,SAAA,EAAW,CACTpB,SAAA,EACAe,cAAA,IAAkB,GAAGf,SAAA,aAAsB,EAC3CG,QAAA,IAAY,GAAGH,SAAA,UAAmB,EAClCE,MAAA,IAAU,GAAGF,SAAA,UAAmB,CACjC,CACEqB,MAAM,CAACC,OAAA,EACPC,IAAI,CAAC;MACRC,OAAA,EAASnB,WAAA;MACToB,IAAA,EAAK;iBAEJnB,GAAA,CAAIoB,KAAK,GACN9B,cAAA,CAAeU,GAAA,CAAIoB,KAAK,EAAEnB,IAAA,IAC1BZ,UAAA,CAAWW,GAAA,IACTA,GAAA,CAAIQ,IAAI,GACR,IACLC,cAAA,iBAAkBG,IAAA,CAACrB,SAAA;QAAU8B,KAAA,EAAOnB,UAAA;QAAYD,IAAA,EAAMA;;;;AAI/D","ignoreList":[]}