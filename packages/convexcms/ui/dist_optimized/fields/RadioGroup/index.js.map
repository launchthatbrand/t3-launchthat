{"version":3,"file":"index.js","names":["React","useCallback","useMemo","optionIsObject","RenderCustomComponent","FieldDescription","FieldError","FieldLabel","useForm","useField","withCondition","mergeFieldStyles","fieldBaseClass","Radio","baseClass","RadioGroupFieldComponent","props","disableModifyingForm","disableModifyingFormFromProps","field","admin","className","description","layout","label","localized","options","required","onChange","onChangeFromProps","path","readOnly","validate","value","valueFromProps","uuid","memoizedValidate","validationOptions","customComponents","AfterInput","BeforeInput","Description","Error","Label","disabled","setValue","showError","valueFromContext","styles","_jsxs","filter","Boolean","join","style","_jsx","CustomComponent","Fallback","id","replace","map","option","optionValue","isSelected","String","RadioGroupField"],"sources":["../../../src/fields/RadioGroup/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type {\n  RadioFieldClientComponent,\n  RadioFieldClientProps,\n} from \"@convexcms/core\";\nimport React, { useCallback, useMemo } from \"react\";\nimport { optionIsObject } from \"@convexcms/core/shared\";\n\nimport { RenderCustomComponent } from \"../../elements/RenderCustomComponent/index.js\";\nimport { FieldDescription } from \"../../fields/FieldDescription/index.js\";\nimport { FieldError } from \"../../fields/FieldError/index.js\";\nimport { FieldLabel } from \"../../fields/FieldLabel/index.js\";\nimport { useForm } from \"../../forms/Form/context.js\";\nimport { useField } from \"../../forms/useField/index.js\";\nimport { withCondition } from \"../../forms/withCondition/index.js\";\nimport { mergeFieldStyles } from \"../mergeFieldStyles.js\";\nimport { fieldBaseClass } from \"../shared/index.js\";\nimport { Radio } from \"./Radio/index.js\";\n\nconst baseClass = \"radio-group\";\n\nconst RadioGroupFieldComponent: RadioFieldClientComponent = (props) => {\n  const {\n    disableModifyingForm: disableModifyingFormFromProps,\n    field,\n    field: {\n      admin: {\n        className,\n        description,\n        layout = \"horizontal\",\n      } = {} as RadioFieldClientProps[\"field\"][\"admin\"],\n      label,\n      localized,\n      options = [],\n      required,\n    } = {} as RadioFieldClientProps[\"field\"],\n    onChange: onChangeFromProps,\n    path,\n    readOnly,\n    validate,\n    value: valueFromProps,\n  } = props;\n\n  const { uuid } = useForm();\n\n  const memoizedValidate = useCallback(\n    (value, validationOptions) => {\n      if (typeof validate === \"function\") {\n        return validate(value, { ...validationOptions, options, required });\n      }\n    },\n    [validate, options, required],\n  );\n\n  const {\n    customComponents: {\n      AfterInput,\n      BeforeInput,\n      Description,\n      Error,\n      Label,\n    } = {},\n    disabled,\n    setValue,\n    showError,\n    value: valueFromContext,\n  } = useField<string>({\n    path,\n    validate: memoizedValidate,\n  });\n\n  const value = valueFromContext || valueFromProps;\n\n  const styles = useMemo(() => mergeFieldStyles(field), [field]);\n\n  return (\n    <div\n      className={[\n        fieldBaseClass,\n        baseClass,\n        className,\n        `${baseClass}--layout-${layout}`,\n        showError && \"error\",\n        (readOnly || disabled) && `${baseClass}--read-only`,\n      ]\n        .filter(Boolean)\n        .join(\" \")}\n      style={styles}\n    >\n      <RenderCustomComponent\n        CustomComponent={Error}\n        Fallback={<FieldError path={path} showError={showError} />}\n      />\n      <RenderCustomComponent\n        CustomComponent={Label}\n        Fallback={\n          <FieldLabel\n            label={label}\n            localized={localized}\n            path={path}\n            required={required}\n          />\n        }\n      />\n      <div className={`${fieldBaseClass}__wrap`}>\n        {BeforeInput}\n        <ul\n          className={`${baseClass}--group`}\n          id={`field-${path.replace(/\\./g, \"__\")}`}\n        >\n          {options.map((option) => {\n            let optionValue = \"\";\n\n            if (optionIsObject(option)) {\n              optionValue = option.value;\n            } else {\n              optionValue = option;\n            }\n\n            const isSelected = String(optionValue) === String(value);\n\n            const id = `field-${path}-${optionValue}${uuid ? `-${uuid}` : \"\"}`;\n\n            return (\n              <li key={`${path} - ${optionValue}`}>\n                <Radio\n                  id={id}\n                  isSelected={isSelected}\n                  onChange={() => {\n                    if (typeof onChangeFromProps === \"function\") {\n                      onChangeFromProps(optionValue);\n                    }\n\n                    if (!(readOnly || disabled)) {\n                      setValue(optionValue, !!disableModifyingFormFromProps);\n                    }\n                  }}\n                  option={\n                    optionIsObject(option)\n                      ? option\n                      : { label: option, value: option }\n                  }\n                  path={path}\n                  readOnly={readOnly || disabled}\n                  uuid={uuid}\n                />\n              </li>\n            );\n          })}\n        </ul>\n        {AfterInput}\n        <RenderCustomComponent\n          CustomComponent={Description}\n          Fallback={<FieldDescription description={description} path={path} />}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport const RadioGroupField: any = withCondition(RadioGroupFieldComponent);\n"],"mappings":"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","ignoreList":[]}