{"version":3,"file":"index.js","names":["React","Tooltip","useFormFields","useFormSubmitted","baseClass","FieldError","props","alignCaret","message","messageFromProps","path","showError","showErrorFromProps","hasSubmitted","field","fields","errorMessage","valid","showMessage","length","_jsx","className","delay","staticPositioning"],"sources":["../../../src/fields/FieldError/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type { GenericErrorProps } from \"@convexcms/core\";\nimport React from \"react\";\n\nimport { Tooltip } from \"../../elements/Tooltip/index.js\";\nimport { useFormFields, useFormSubmitted } from \"../../forms/Form/context.js\";\n\nconst baseClass = \"field-error\";\n\nexport const FieldError: React.FC<GenericErrorProps> = (props) => {\n  const {\n    alignCaret = \"right\",\n    message: messageFromProps,\n    path,\n    showError: showErrorFromProps,\n  } = props;\n\n  const hasSubmitted = useFormSubmitted();\n  const field = useFormFields(([fields]) => (fields && fields?.[path]) || null);\n\n  const { errorMessage, valid } = field || {};\n\n  const message = messageFromProps || errorMessage;\n  const showMessage = showErrorFromProps || (hasSubmitted && valid === false);\n\n  if (showMessage && message?.length) {\n    return (\n      <Tooltip\n        alignCaret={alignCaret}\n        className={baseClass}\n        delay={0}\n        staticPositioning\n      >\n        {message}\n      </Tooltip>\n    );\n  }\n\n  return null;\n};\n"],"mappings":"AAAA;;;AAEA,OAAO;AAGP,OAAOA,KAAA,MAAW;AAElB,SAASC,OAAO,QAAQ;AACxB,SAASC,aAAa,EAAEC,gBAAgB,QAAQ;AAEhD,MAAMC,SAAA,GAAY;AAElB,OAAO,MAAMC,UAAA,GAA2CC,KAAA;EACtD,MAAM;IACJC,UAAA,GAAa,OAAO;IACpBC,OAAA,EAASC,gBAAgB;IACzBC,IAAI;IACJC,SAAA,EAAWC;EAAkB,CAC9B,GAAGN,KAAA;EAEJ,MAAMO,YAAA,GAAeV,gBAAA;EACrB,MAAMW,KAAA,GAAQZ,aAAA,CAAc,CAAC,CAACa,MAAA,CAAO,KAAKA,MAAC,IAAUA,MAAA,GAASL,IAAA,CAAK,IAAK;EAExE,MAAM;IAAEM,YAAY;IAAEC;EAAK,CAAE,GAAGH,KAAA,IAAS,CAAC;EAE1C,MAAMN,OAAA,GAAUC,gBAAA,IAAoBO,YAAA;EACpC,MAAME,WAAA,GAAcN,kBAAA,IAAuBC,YAAA,IAAgBI,KAAA,KAAU;EAErE,IAAIC,WAAA,IAAeV,OAAA,EAASW,MAAA,EAAQ;IAClC,oBACEC,IAAA,CAACnB,OAAA;MACCM,UAAA,EAAYA,UAAA;MACZc,SAAA,EAAWjB,SAAA;MACXkB,KAAA,EAAO;MACPC,iBAAiB;gBAEhBf;;EAGP;EAEA,OAAO;AACT","ignoreList":[]}