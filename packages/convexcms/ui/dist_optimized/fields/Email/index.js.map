{"version":3,"file":"index.js","names":["React","useCallback","useMemo","getTranslation","RenderCustomComponent","FieldDescription","FieldError","useField","withCondition","useTranslation","FieldLabel","mergeFieldStyles","fieldBaseClass","EmailFieldComponent","props","field","admin","autoComplete","className","description","placeholder","label","localized","required","path","readOnly","validate","i18n","memoizedValidate","value","options","customComponents","AfterInput","BeforeInput","Description","Error","Label","disabled","setValue","showError","styles","_jsxs","filter","Boolean","join","style","_jsx","CustomComponent","Fallback","id","replace","name","onChange","type","EmailField"],"sources":["../../../src/fields/Email/index.tsx"],"sourcesContent":["\"use client\";\n\nimport \"./index.scss\";\n\nimport type {\n  EmailFieldClientComponent,\n  EmailFieldClientProps,\n  EmailFieldValidation,\n} from \"@convexcms/core\";\nimport React, { useCallback, useMemo } from \"react\";\nimport { getTranslation } from \"@convexcms/translations\";\n\nimport { RenderCustomComponent } from \"../../elements/RenderCustomComponent/index.js\";\nimport { FieldDescription } from \"../../fields/FieldDescription/index.js\";\nimport { FieldError } from \"../../fields/FieldError/index.js\";\nimport { useField } from \"../../forms/useField/index.js\";\nimport { withCondition } from \"../../forms/withCondition/index.js\";\nimport { useTranslation } from \"../../providers/Translation/index.js\";\nimport { FieldLabel } from \"../FieldLabel/index.js\";\nimport { mergeFieldStyles } from \"../mergeFieldStyles.js\";\nimport { fieldBaseClass } from \"../shared/index.js\";\n\nconst EmailFieldComponent: EmailFieldClientComponent = (props) => {\n  const {\n    field,\n    field: {\n      admin: {\n        autoComplete,\n        className,\n        description,\n        placeholder,\n      } = {} as EmailFieldClientProps[\"field\"][\"admin\"],\n      label,\n      localized,\n      required,\n    } = {} as EmailFieldClientProps[\"field\"],\n    path,\n    readOnly,\n    validate,\n  } = props;\n\n  const { i18n } = useTranslation();\n\n  const memoizedValidate: EmailFieldValidation = useCallback(\n    (value, options) => {\n      if (typeof validate === \"function\") {\n        return validate(value, { ...options, required });\n      }\n    },\n    [validate, required],\n  );\n\n  const {\n    customComponents: {\n      AfterInput,\n      BeforeInput,\n      Description,\n      Error,\n      Label,\n    } = {},\n    disabled,\n    setValue,\n    showError,\n    value,\n  } = useField({\n    path,\n    validate: memoizedValidate,\n  });\n\n  const styles = useMemo(() => mergeFieldStyles(field), [field]);\n\n  return (\n    <div\n      className={[\n        fieldBaseClass,\n        \"email\",\n        className,\n        showError && \"error\",\n        (readOnly || disabled) && \"read-only\",\n      ]\n        .filter(Boolean)\n        .join(\" \")}\n      style={styles}\n    >\n      <RenderCustomComponent\n        CustomComponent={Label}\n        Fallback={\n          <FieldLabel\n            label={label}\n            localized={localized}\n            path={path}\n            required={required}\n          />\n        }\n      />\n      <div className={`${fieldBaseClass}__wrap`}>\n        <RenderCustomComponent\n          CustomComponent={Error}\n          Fallback={<FieldError path={path} showError={showError} />}\n        />\n        {BeforeInput}\n        {/* disable eslint here because the label is dynamic */}\n        {/* eslint-disable-next-line jsx-a11y/control-has-associated-label */}\n        <input\n          autoComplete={autoComplete}\n          disabled={readOnly || disabled}\n          id={`field-${path.replace(/\\./g, \"__\")}`}\n          name={path}\n          onChange={setValue}\n          placeholder={getTranslation(placeholder, i18n)}\n          required={required}\n          type=\"email\"\n          value={(value as string) || \"\"}\n        />\n        {AfterInput}\n      </div>\n      <RenderCustomComponent\n        CustomComponent={Description}\n        Fallback={<FieldDescription description={description} path={path} />}\n      />\n    </div>\n  );\n};\n\nexport const EmailField = withCondition(EmailFieldComponent);\n"],"mappings":"AAAA;;;AAEA,OAAO;AAOP,OAAOA,KAAA,IAASC,WAAW,EAAEC,OAAO,QAAQ;AAC5C,SAASC,cAAc,QAAQ;AAE/B,SAASC,qBAAqB,QAAQ;AACtC,SAASC,gBAAgB,QAAQ;AACjC,SAASC,UAAU,QAAQ;AAC3B,SAASC,QAAQ,QAAQ;AACzB,SAASC,aAAa,QAAQ;AAC9B,SAASC,cAAc,QAAQ;AAC/B,SAASC,UAAU,QAAQ;AAC3B,SAASC,gBAAgB,QAAQ;AACjC,SAASC,cAAc,QAAQ;AAE/B,MAAMC,mBAAA,GAAkDC,KAAA;EACtD,MAAM;IACJC,KAAK;IACLA,KAAA,EAAO;MACLC,KAAA,EAAO;QACLC,YAAY;QACZC,SAAS;QACTC,WAAW;QACXC;MAAW,CACZ,GAAG,CAAC,CAA4C;MACjDC,KAAK;MACLC,SAAS;MACTC;IAAQ,CACT,GAAG,CAAC,CAAmC;IACxCC,IAAI;IACJC,QAAQ;IACRC;EAAQ,CACT,GAAGZ,KAAA;EAEJ,MAAM;IAAEa;EAAI,CAAE,GAAGlB,cAAA;EAEjB,MAAMmB,gBAAA,GAAyC3B,WAAA,CAC7C,CAAC4B,KAAA,EAAOC,OAAA;IACN,IAAI,OAAOJ,QAAA,KAAa,YAAY;MAClC,OAAOA,QAAA,CAASG,KAAA,EAAO;QAAE,GAAGC,OAAO;QAAEP;MAAS;IAChD;EACF,GACA,CAACG,QAAA,EAAUH,QAAA,CAAS;EAGtB,MAAM;IACJQ,gBAAA,EAAkB;MAChBC,UAAU;MACVC,WAAW;MACXC,WAAW;MACXC,KAAK;MACLC;IAAK,CACN,GAAG,CAAC,CAAC;IACNC,QAAQ;IACRC,QAAQ;IACRC,SAAS;IACTV;EAAK,CACN,GAAGtB,QAAA,CAAS;IACXiB,IAAA;IACAE,QAAA,EAAUE;EACZ;EAEA,MAAMY,MAAA,GAAStC,OAAA,CAAQ,MAAMS,gBAAA,CAAiBI,KAAA,GAAQ,CAACA,KAAA,CAAM;EAE7D,oBACE0B,KAAA,CAAC;IACCvB,SAAA,EAAW,CACTN,cAAA,EACA,SACAM,SAAA,EACAqB,SAAA,IAAa,SACZ,CAAAd,QAAA,IAAYY,QAAO,KAAM,YAC3B,CACEK,MAAM,CAACC,OAAA,EACPC,IAAI,CAAC;IACRC,KAAA,EAAOL,MAAA;4BAEPM,IAAA,CAAC1C,qBAAA;MACC2C,eAAA,EAAiBX,KAAA;MACjBY,QAAA,eACEF,IAAA,CAACpC,UAAA;QACCW,KAAA,EAAOA,KAAA;QACPC,SAAA,EAAWA,SAAA;QACXE,IAAA,EAAMA,IAAA;QACND,QAAA,EAAUA;;qBAIhBkB,KAAA,CAAC;MAAIvB,SAAA,EAAW,GAAGN,cAAA,QAAsB;8BACvCkC,IAAA,CAAC1C,qBAAA;QACC2C,eAAA,EAAiBZ,KAAA;QACjBa,QAAA,eAAUF,IAAA,CAACxC,UAAA;UAAWkB,IAAA,EAAMA,IAAA;UAAMe,SAAA,EAAWA;;UAE9CN,WAAA,E,aAGDa,IAAA,CAAC;QACC7B,YAAA,EAAcA,YAAA;QACdoB,QAAA,EAAUZ,QAAA,IAAYY,QAAA;QACtBY,EAAA,EAAI,SAASzB,IAAA,CAAK0B,OAAO,CAAC,OAAO,OAAO;QACxCC,IAAA,EAAM3B,IAAA;QACN4B,QAAA,EAAUd,QAAA;QACVlB,WAAA,EAAajB,cAAA,CAAeiB,WAAA,EAAaO,IAAA;QACzCJ,QAAA,EAAUA,QAAA;QACV8B,IAAA,EAAK;QACLxB,KAAA,EAAOA,KAAC,IAAoB;UAE7BG,UAAA;qBAEHc,IAAA,CAAC1C,qBAAA;MACC2C,eAAA,EAAiBb,WAAA;MACjBc,QAAA,eAAUF,IAAA,CAACzC,gBAAA;QAAiBc,WAAA,EAAaA,WAAA;QAAaK,IAAA,EAAMA;;;;AAIpE;AAEA,OAAO,MAAM8B,UAAA,GAAa9C,aAAA,CAAcK,mBAAA","ignoreList":[]}