{"version":3,"file":"renderField.js","names":["createClientField","MissingEditorProp","fieldIsHiddenOrDisabled","getTranslation","RenderServerComponent","FieldDescription","WatchCondition","defaultUIFieldComponentKeys","renderField","id","clientFieldSchemaMap","collectionSlug","data","fieldConfig","fieldSchemaMap","fieldState","formState","indexPath","lastRenderedPath","mockRSCs","operation","parentPath","parentSchemaPath","path","permissions","preferences","renderAllFields","req","schemaPath","siblingData","requiresRender","type","clientField","get","defaultIDType","payload","config","db","field","i18n","importMap","clientProps","readOnly","customComponents","includes","serverProps","user","rows","forEach","row","rowIndex","rowLastRenderedPath","rowPath","rowRequiresRender","admin","components","RowLabel","Component","key","rowLabel","labels","singular","String","padStart","rowNumber","blockTypeToMatch","blockType","blockConfig","blocks","blockReferences","find","block","slug","Label","Object","keys","length","description","editor","Error","Field","_jsx","FieldComponent","Description","t","AfterInput","afterInput","BeforeInput","beforeInput"],"sources":["../../../src/forms/fieldSchemasToFormState/renderField.tsx"],"sourcesContent":["import type {\n  ClientComponentProps,\n  ClientField,\n  FieldPaths,\n  FlattenedBlock,\n  ServerComponentProps,\n} from \"@convexcms/core\";\nimport { createClientField, MissingEditorProp } from \"@convexcms/core\";\nimport { fieldIsHiddenOrDisabled } from \"@convexcms/core/shared\";\nimport { getTranslation } from \"@convexcms/translations\";\n\nimport type { RenderFieldMethod } from \"./types.js\";\nimport { RenderServerComponent } from \"../../elements/RenderServerComponent/index.js\";\n// eslint-disable-next-line payload/no-imports-from-exports-dir -- need this to reference already existing bundle. Otherwise, bundle size increases., payload/no-imports-from-exports-dir\nimport {\n  FieldDescription,\n  WatchCondition,\n} from \"../../exports/client/index.js\";\n\nconst defaultUIFieldComponentKeys: Array<\n  \"Cell\" | \"Description\" | \"Field\" | \"Filter\"\n> = [\"Cell\", \"Description\", \"Field\", \"Filter\"];\n\nexport const renderField: RenderFieldMethod = ({\n  id,\n  clientFieldSchemaMap,\n  collectionSlug,\n  data,\n  fieldConfig,\n  fieldSchemaMap,\n  fieldState,\n  formState,\n  indexPath,\n  lastRenderedPath,\n  mockRSCs,\n  operation,\n  parentPath,\n  parentSchemaPath,\n  path,\n  permissions,\n  preferences,\n  renderAllFields,\n  req,\n  schemaPath,\n  siblingData,\n}) => {\n  const requiresRender =\n    renderAllFields || !lastRenderedPath || lastRenderedPath !== path;\n\n  if (\n    !requiresRender &&\n    fieldConfig.type !== \"array\" &&\n    fieldConfig.type !== \"blocks\"\n  ) {\n    return;\n  }\n\n  const clientField = clientFieldSchemaMap\n    ? (clientFieldSchemaMap.get(schemaPath) as ClientField)\n    : createClientField({\n        defaultIDType: req.payload.config.db.defaultIDType,\n        field: fieldConfig,\n        i18n: req.i18n,\n        importMap: req.payload.importMap,\n      });\n\n  const clientProps: ClientComponentProps & Partial<FieldPaths> = {\n    field: clientField,\n    path,\n    permissions,\n    readOnly:\n      typeof permissions === \"boolean\"\n        ? !permissions\n        : !permissions?.[operation],\n    schemaPath,\n  };\n\n  if (fieldState?.customComponents) {\n    clientProps.customComponents = fieldState.customComponents;\n  }\n\n  // fields with subfields\n  if (\n    [\"array\", \"blocks\", \"collapsible\", \"group\", \"row\", \"tabs\"].includes(\n      fieldConfig.type,\n    )\n  ) {\n    clientProps.indexPath = indexPath;\n    clientProps.parentPath = parentPath;\n    clientProps.parentSchemaPath = parentSchemaPath;\n  }\n\n  const serverProps: ServerComponentProps = {\n    id,\n    clientField,\n    clientFieldSchemaMap,\n    data,\n    field: fieldConfig,\n    fieldSchemaMap,\n    permissions,\n    // TODO: Should we pass explicit values? initialValue, value, valid\n    // value and initialValue should be typed\n    collectionSlug,\n    formState,\n    i18n: req.i18n,\n    operation,\n    payload: req.payload,\n    preferences,\n    req,\n    siblingData,\n    user: req.user,\n  };\n\n  switch (fieldConfig.type) {\n    case \"array\": {\n      fieldState?.rows?.forEach((row, rowIndex) => {\n        const rowLastRenderedPath = row.lastRenderedPath;\n\n        const rowPath = `${path}.${rowIndex}`;\n\n        const rowRequiresRender =\n          renderAllFields ||\n          !rowLastRenderedPath ||\n          rowLastRenderedPath !== rowPath;\n\n        if (!rowRequiresRender) {\n          return;\n        }\n\n        row.lastRenderedPath = rowPath;\n\n        if (\n          fieldConfig.admin?.components &&\n          \"RowLabel\" in fieldConfig.admin.components\n        ) {\n          if (!row.customComponents) {\n            row.customComponents = {};\n          }\n\n          row.customComponents.RowLabel = !mockRSCs\n            ? RenderServerComponent({\n                clientProps,\n                Component: fieldConfig.admin.components.RowLabel,\n                importMap: req.payload.importMap,\n                key: `${rowIndex}`,\n                serverProps: {\n                  ...serverProps,\n                  rowLabel: `${getTranslation(fieldConfig.labels.singular, req.i18n)} ${String(\n                    rowIndex + 1,\n                  ).padStart(2, \"0\")}`,\n                  rowNumber: rowIndex + 1,\n                },\n              })\n            : \"Mock\";\n        }\n      });\n\n      break;\n    }\n\n    case \"blocks\": {\n      fieldState?.rows?.forEach((row, rowIndex) => {\n        const rowLastRenderedPath = row.lastRenderedPath;\n\n        const rowPath = `${path}.${rowIndex}`;\n\n        const rowRequiresRender =\n          renderAllFields ||\n          !rowLastRenderedPath ||\n          rowLastRenderedPath !== rowPath;\n\n        if (!rowRequiresRender) {\n          return;\n        }\n\n        row.lastRenderedPath = rowPath;\n\n        const blockTypeToMatch: string = row.blockType;\n\n        const blockConfig =\n          req.payload.blocks[blockTypeToMatch] ??\n          ((fieldConfig.blockReferences ?? fieldConfig.blocks).find(\n            (block) =>\n              typeof block !== \"string\" && block.slug === blockTypeToMatch,\n          ) as FlattenedBlock | undefined);\n\n        if (\n          blockConfig.admin?.components &&\n          \"Label\" in blockConfig.admin.components\n        ) {\n          if (!fieldState.rows[rowIndex]?.customComponents) {\n            fieldState.rows[rowIndex].customComponents = {};\n          }\n\n          fieldState.rows[rowIndex].customComponents.RowLabel = !mockRSCs\n            ? RenderServerComponent({\n                clientProps,\n                Component: blockConfig.admin.components.Label,\n                importMap: req.payload.importMap,\n                key: `${rowIndex}`,\n                serverProps: {\n                  ...serverProps,\n                  blockType: row.blockType,\n                  rowLabel: `${getTranslation(blockConfig.labels.singular, req.i18n)} ${String(\n                    rowIndex + 1,\n                  ).padStart(2, \"0\")}`,\n                  rowNumber: rowIndex + 1,\n                },\n              })\n            : \"Mock\";\n        }\n      });\n\n      break;\n    }\n  }\n\n  if (!requiresRender) {\n    return;\n  }\n\n  /**\n   * Set the lastRenderedPath equal to the new path of the field\n   */\n  fieldState.lastRenderedPath = path;\n\n  if (fieldIsHiddenOrDisabled(clientField)) {\n    return;\n  }\n\n  /**\n   * Only create the `customComponents` object if needed.\n   * This will prevent unnecessary data from being transferred to the client.\n   */\n  if (fieldConfig.admin) {\n    if (\n      (Object.keys(fieldConfig.admin.components || {}).length > 0 ||\n        fieldConfig.type === \"richText\" ||\n        (\"description\" in fieldConfig.admin &&\n          typeof fieldConfig.admin.description === \"function\")) &&\n      !fieldState?.customComponents\n    ) {\n      fieldState.customComponents = {};\n    }\n  }\n\n  switch (fieldConfig.type) {\n    case \"richText\": {\n      if (!fieldConfig?.editor) {\n        throw new MissingEditorProp(fieldConfig); // while we allow disabling editor functionality, you should not have any richText fields defined if you do not have an editor\n      }\n\n      if (typeof fieldConfig?.editor === \"function\") {\n        throw new Error(\"Attempted to access unsanitized rich text editor.\");\n      }\n\n      if (!fieldConfig.admin) {\n        fieldConfig.admin = {};\n      }\n\n      if (!fieldConfig.admin.components) {\n        fieldConfig.admin.components = {};\n      }\n\n      fieldState.customComponents.Field = !mockRSCs ? (\n        <WatchCondition path={path}>\n          {RenderServerComponent({\n            clientProps,\n            Component: fieldConfig.editor.FieldComponent,\n            importMap: req.payload.importMap,\n            serverProps,\n          })}\n        </WatchCondition>\n      ) : (\n        \"Mock\"\n      );\n\n      break;\n    }\n\n    case \"ui\": {\n      if (fieldConfig?.admin?.components) {\n        // Render any extra, untyped components\n        for (const key in fieldConfig.admin.components) {\n          if (key in defaultUIFieldComponentKeys) {\n            continue;\n          }\n\n          const Component = fieldConfig.admin.components[key];\n\n          fieldState.customComponents[key] = !mockRSCs\n            ? RenderServerComponent({\n                clientProps,\n                Component,\n                importMap: req.payload.importMap,\n                key: `field.admin.components.${key}`,\n                serverProps,\n              })\n            : \"Mock\";\n        }\n      }\n      break;\n    }\n\n    default: {\n      break;\n    }\n  }\n\n  if (fieldConfig.admin) {\n    if (\n      \"description\" in fieldConfig.admin &&\n      typeof fieldConfig.admin?.description === \"function\"\n    ) {\n      fieldState.customComponents.Description = !mockRSCs ? (\n        <FieldDescription\n          description={fieldConfig.admin?.description({\n            i18n: req.i18n,\n            t: req.i18n.t,\n          })}\n          path={path}\n        />\n      ) : (\n        \"Mock\"\n      );\n    }\n\n    if (fieldConfig.admin?.components) {\n      if (\"afterInput\" in fieldConfig.admin.components) {\n        fieldState.customComponents.AfterInput = !mockRSCs\n          ? RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.afterInput,\n              importMap: req.payload.importMap,\n              key: \"field.admin.components.afterInput\",\n              serverProps,\n            })\n          : \"Mock\";\n      }\n\n      if (\"beforeInput\" in fieldConfig.admin.components) {\n        fieldState.customComponents.BeforeInput = !mockRSCs\n          ? RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.beforeInput,\n              importMap: req.payload.importMap,\n              key: \"field.admin.components.beforeInput\",\n              serverProps,\n            })\n          : \"Mock\";\n      }\n\n      if (\"Description\" in fieldConfig.admin.components) {\n        fieldState.customComponents.Description = !mockRSCs\n          ? RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.Description,\n              importMap: req.payload.importMap,\n              key: \"field.admin.components.Description\",\n              serverProps,\n            })\n          : \"Mock\";\n      }\n\n      if (\"Error\" in fieldConfig.admin.components) {\n        fieldState.customComponents.Error = !mockRSCs\n          ? RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.Error,\n              importMap: req.payload.importMap,\n              key: \"field.admin.components.Error\",\n              serverProps,\n            })\n          : \"Mock\";\n      }\n\n      if (\"Label\" in fieldConfig.admin.components) {\n        fieldState.customComponents.Label = !mockRSCs\n          ? RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.Label,\n              importMap: req.payload.importMap,\n              key: \"field.admin.components.Label\",\n              serverProps,\n            })\n          : \"Mock\";\n      }\n\n      if (\"Field\" in fieldConfig.admin.components) {\n        fieldState.customComponents.Field = !mockRSCs ? (\n          <WatchCondition path={path}>\n            {RenderServerComponent({\n              clientProps,\n              Component: fieldConfig.admin.components.Field,\n              importMap: req.payload.importMap,\n              key: \"field.admin.components.Field\",\n              serverProps,\n            })}\n          </WatchCondition>\n        ) : (\n          \"Mock\"\n        );\n      }\n    }\n  }\n};\n"],"mappings":"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","ignoreList":[]}